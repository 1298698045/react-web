(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[97],{"+hjE":function(e,t,n){"use strict";n.r(t);n("y8nQ");var a=n("Vl3Y"),o=n("eHn4"),c=n.n(o),r=n("jehZ"),i=n.n(r),l=(n("5Dmo"),n("3S7+")),u=(n("Pwec"),n("CtXQ")),m=(n("2qtc"),n("kLXV")),E=(n("+L6B"),n("2/Rp")),s=n("qIgq"),d=n.n(s),T=n("p0pE"),f=n.n(T),p=(n("lUTK"),n("BvKs")),_=n("q1tI"),y=n.n(_),k=n("MuoO"),S=n("v99g"),A=n("myFP"),D=n("mGJS"),b=n("usdK"),N=n("9vKQ"),M=(n("14J3"),n("BMrR")),x=(n("jCWc"),n("kPKH")),g=function(e){var t=e.selectedRow,n=e.onSubmit,o=e.visible,r=e.setVisible,l=e.form,u=e.loading,E=function(e){e.preventDefault(),l.validateFields(function(e,a){if(e)return!1;n(f()({},a,c()({id:t.id},N["a"].STUDENT.EXAM_DATE.key,a[N["a"].STUDENT.EXAM_DATE.key].format("YYYY-MM-DD"))))})},s=function(e){e.preventDefault(),r(!1)};return y.a.createElement(m["a"],{destroyOnClose:!0,title:(t[N["a"].STUDENT.NAME.key]?"\u4fee\u6539":"\u5f55\u5165")+"\u8003\u8bd5\u6210\u7ee9",width:"90%",visible:o,onOk:E,onCancel:s,closable:!0,maskClosable:!1,keyboard:!1,confirmLoading:u,okText:"\u63d0\u4ea4",cancelText:"\u53d6\u6d88"},y.a.createElement(a["a"],{onSubmit:E},y.a.createElement(M["a"],{gutter:24},[N["a"].STUDENT.NAME,f()({},N["a"].STUDENT.EXAM_STUDY_ID,{notRequired:!0}),N["a"].STUDENT.IDCARD_NO,N["a"].STUDENT.EXAM_KM,N["a"].STUDENT.EXAM_CAR_TYPE,N["a"].STUDENT.EXAM_PLACE,N["a"].STUDENT.EXAM_DATE,f()({},N["a"].STUDENT.EXAM_TIME),N["a"].STUDENT.EXAM_SCORE,f()({},N["a"].STUDENT.EXAM_FAIL_ITEM,{mode:"multiple",notRequired:!0}),{key:"overwrite",title:"\u662f\u5426\u8986\u76d6",type:"radio",dictionary:"switch",initialValue:"0"}].map(function(n){return y.a.createElement(x["a"],{md:8,sm:24,key:n.key,style:{height:"88px"}},y.a.createElement(D["a"],i()({},e,{config:n,form:l,mode:n.mode,values:n.values,initialValue:void 0!==t[n.key]?t[n.key]:n.initialValue,rules:[{required:!n.notRequired,message:"\u8be5\u9879\u4e3a\u5fc5\u586b"}]})))}))))},v=a["a"].create()(g),C=(n("MXD1"),n("CFYs")),U=(n("DZo9"),n("8z0m")),O=(n("miYZ"),n("tsqr")),h=n("2ZYJ"),X=n("Z2nI"),R=(n("Plse"),n("t3Un")),I=function(e){e.selectedRow;var t=e.onSubmit,n=e.visible,o=e.setVisible,c=e.form,r=e.loading,i=e.dispatch,l=Object(_["useState"])(0),s=d()(l,2),T=s[0],f=s[1],p=Object(_["useState"])({}),k=d()(p,2),S=k[0],A=k[1],D=function(e){e.preventDefault(),c.validateFields(function(e,n){if(e)return!1;t(n)})},b=function(e){e.preventDefault(),o(!1)},N=function(e){if(console.log(e),"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status){var t=Object(X["a"])(e.file.response)();!1!==t?g(t):O["a"].error("\u5b66\u5458\u4fe1\u606f\u5bfc\u5165\u5931\u8d25\uff01")}else"error"===e.file.status&&O["a"].error("".concat(e.file.name," \u4e0a\u4f20\u5931\u8d25\uff01"))},g=function e(t){i({type:"examScore_1/queryResult",params:{batchNo:t}}).then(function(n){n?(console.log(n),A(n),f(Math.floor(n.processed_count/n.total*100)),n.exception_count||0==n.exception_count?0!=n.exception_count||O["a"].success("\u606d\u559c\uff0c\u8003\u8bd5\u4fe1\u606f\u5168\u90e8\u4e0a\u4f20\u6210\u529f\uff01"):setTimeout(function(){return e(t)},1e3)):setTimeout(function(){return e(t)},1e3)})};return y.a.createElement(m["a"],{destroyOnClose:!0,title:"\u5bfc\u5165\u8003\u8bd5\u6210\u7ee9\u8868",visible:n,onOk:D,onCancel:b,closable:!0,maskClosable:!1,keyboard:!1,footer:null,confirmLoading:r,okText:"\u63d0\u4ea4",cancelText:"\u53d6\u6d88"},y.a.createElement(a["a"],{onSubmit:D},y.a.createElement(M["a"],{gutter:24},y.a.createElement(x["a"],null,y.a.createElement(U["a"],{name:"file",showUploadList:!1,headers:Object(R["b"])(),action:"".concat(h["b"],"/api/student/grade/import"),onChange:N},y.a.createElement(E["a"],null,y.a.createElement(u["a"],{type:"upload"})," \u9009\u62e9\u8003\u8bd5\u6210\u7ee9\u8868"))))),y.a.createElement(C["a"],{strokeColor:{from:"#108ee9",to:"#87d068"},percent:T,showInfo:!0,status:"active"}),S.total&&y.a.createElement("div",null,"\u5171",S.total,"\u4e2a\u8003\u8bd5\u4fe1\u606f\uff0c\u5df2\u5904\u7406",S.processed_count,"\u4e2a"),S.exception_count&&0!=S.exception_count?y.a.createElement("div",null,"\u6709",S.exception_count,"\u4e2a\u8003\u8bd5\u4fe1\u606f\u4e3a\u5f02\u5e38\u6570\u636e\uff0c\u8bf7\u67e5\u770b\u5f02\u5e38\u6570\u636e\u5e76\u4fee\u6539\uff01"):"")},w=a["a"].create()(I),P=n("tS4M"),j=(n("03Mi"),n("uY7g")),Y=n("uCI1"),q=n.n(Y),K=p["b"].Item,L="examScore_1",V="examScore_2",F="examScore_3",H="examScore_4",Z="examScore_5",B=[N["a"].STUDENT.EXAM_STUDY_ID,N["a"].STUDENT.IDCARD_NO,N["a"].STUDENT.EXAM_KM,N["a"].STUDENT.EXAM_CAR_TYPE,N["a"].STUDENT.EXAM_DATE,N["a"].STUDENT.EXAM_TIME,N["a"].STUDENT.EXAM_PLACE,f()({},N["a"].STUDENT.EXAM_SCORE,{customRender:function(e){return Number(e)<0?"":e}}),N["a"].STUDENT.EXAM_RESULT,N["a"].STUDENT.EXAM_FAIL_ITEM,N["a"].STUDENT.MOBILE],Q=[{config:N["a"].STUDENT.DEPART_ID_SCHOOL},{config:N["a"].STUDENT.EXAM_KM},{config:N["a"].STUDENT.EXAM_RESULT},{config:N["a"].STUDENT.EXAM_FAIL_ITEM},{config:N["a"].STUDENT.EXAM_DATE_RANGE,col:9},{config:N["a"].STUDENT.QUICK_SEARCH,col:9}],J=function(e){var t=e.dispatch,n=e.form,a=e.quickEntryParams,o=Object(_["useState"])([]),c=d()(o,2),r=c[0],s=c[1],T=Object(_["useState"])("0"),k=d()(T,2),M=k[0],x=k[1],g=Object(_["useState"])(!1),C=d()(g,2),U=C[0],O=C[1],h=Object(_["useState"])(!1),X=d()(h,2),R=X[0],I=X[1],Y=Object(_["useState"])({}),J=d()(Y,2),G=J[0],z=J[1],W=Object(_["useState"])(!1),$=d()(W,2),ee=$[0],te=$[1],ne=Object(_["useState"])(!1),ae=d()(ne,2),oe=ae[0],ce=ae[1],re=Object(_["useState"])(!1),ie=d()(re,2),le=ie[0],ue=ie[1];Object(P["useEffectOnce"])(function(){"record"===a?(z({}),O(!0)):"import"===a&&te(!0),t({type:"quickEntryParams/clearParams"})});var me=function(e){return t({type:"studentExam/clearScoreOutliers",payload:e}).finally(function(){ue(!0)})},Ee={0:{privName:"grade_list",title:"\u6210\u7ee9\u5217\u8868",tableName:L,tableColumns:[f()({},N["a"].STUDENT.NAME,{default:!0,customRender:function(e,t,n){return y.a.createElement(j["a"],{privs:["grade_edit"],noMatch:e},y.a.createElement("a",{onClick:function(e){z(t),O(!0)}},e))}})].concat(B,[N["a"].STUDENT.EXAM_COACH_ID,N["a"].STUDENT.EXAM_TIMES]),tableActions:[y.a.createElement(j["a"],{privs:["record_exam_grade"],key:"record_exam_grade"},y.a.createElement(E["a"],{key:"input",icon:"edit",htmlType:"button",type:"primary",onClick:function(){z({}),O(!0)}},"\u5f55\u5165\u8003\u8bd5\u6210\u7ee9")),y.a.createElement(j["a"],{privs:["import_grade"],key:"import_grade"},y.a.createElement(E["a"],{key:"import",icon:"upload",htmlType:"button",type:"primary",onClick:function(){return te(!0)}},"\u5bfc\u5165\u8003\u8bd5\u6210\u7ee9\u8868")),y.a.createElement(j["a"],{privs:["download_grade_templete"],key:"download_grade_templete"},y.a.createElement(E["a"],{key:"download",icon:"download",htmlType:"button",type:"default",onClick:function(){return b["a"].push("/user-center/template-download")}},"\u4e0b\u8f7d\u5bfc\u5165\u6a21\u677f"))]},1:{title:"\u6bd5\u4e1a\u786e\u8ba4",privName:"finish_study_confrim",tableName:H,selectedRows:r,setSelectedRows:s,tableActions:[y.a.createElement(j["a"],{privs:["graduated_complete"],key:"graduated_complete"},y.a.createElement(E["a"],{disabled:!r.length,key:"input",icon:"check-circle",htmlType:"button",type:"primary",onClick:function(){var e=r.map(function(e){return e.name}),t=r.map(function(e){return e.studentId});m["a"].confirm({title:"\u6bd5\u4e1a\u786e\u8ba4",content:"\u786e\u5b9a\u8981\u8ba9\u3010"+e.join(",")+"\u3011\u6bd5\u4e1a\uff1f",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){return _e(t.join(","))},onCancel:function(){}})}},"\u6279\u91cf\u786e\u8ba4"))],tableColumns:[{key:"operation",title:"\u64cd\u4f5c",default:!0,customRender:function(e,t,n){return y.a.createElement(j["a"],{privs:["graduated_complete"],noMatch:"\u6bd5\u4e1a"},y.a.createElement("a",{onClick:function(){return m["a"].confirm({title:"\u6bd5\u4e1a\u786e\u8ba4",content:"\u786e\u5b9a\u8981\u8ba9\u3010"+t[N["a"].STUDENT.NAME.key]+"\u3011\u6bd5\u4e1a\uff1f",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){return _e(t.studentId)},onCancel:function(){}})}},y.a.createElement(u["a"],{type:"check-circle"})," \u6bd5\u4e1a"))}},f()({},N["a"].STUDENT.NAME,{default:!0,customRender:function(e,t,n){return y.a.createElement(j["a"],{privs:["graduated_edit"],noMatch:e},y.a.createElement("a",{onClick:function(e){z(t),O(!0)}},e))}})].concat(B)},2:{title:"\u5f02\u5e38\u6570\u636e",privName:"grade_exception_data",tableName:V,tableActions:[y.a.createElement(j["a"],{privs:["grade_exception_data_delete"],key:"grade_exception_data_delete"},y.a.createElement(E["a"],{key:"delete",icon:"delete",htmlType:"button",type:"primary",onClick:function(){m["a"].confirm({title:"\u6e05\u7a7a\u5f02\u5e38\u6570\u636e",content:"\u786e\u5b9a\u8981\u6e05\u7a7a\u6240\u6709\u5f02\u5e38\u6570\u636e\u5417\uff1f",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){return me()},onCancel:function(){}})}},"\u6e05\u7a7a\u5f02\u5e38\u6570\u636e"))],tableColumns:[{key:"operation",title:"\u64cd\u4f5c",default:!0,customRender:function(e,t,n){return y.a.createElement(j["a"],{privs:["grade_exception_data_delete"],noMatch:"\u5220\u9664"},y.a.createElement("a",{onClick:function(){return m["a"].confirm({title:"\u5220\u9664\u5f02\u5e38\u6570\u636e",content:"\u786e\u5b9a\u8981\u5220\u9664\u3010"+t[N["a"].STUDENT.NAME.key]+"\u3011\u7684\u5f02\u5e38\u6570\u636e\uff1f",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){return fe(t.id)},onCancel:function(){}})}},y.a.createElement(u["a"],{type:"delete"})," \u5220\u9664"))}},f()({},N["a"].STUDENT.NAME,{default:!0,customRender:function(e,t,n){return y.a.createElement(j["a"],{privs:["grade_exception_data_edit"],noMatch:e},y.a.createElement("a",{onClick:function(e){z(t),O(!0)}},e))}})].concat(B,[N["a"].STUDENT.EXAM_COACH_ID,f()({},N["a"].STUDENT.MEMO,{title:"\u5f02\u5e38\u539f\u56e0",customRender:function(e,t,n,a){var o=e?e.split(","):[];return o.length?1===o.length||""===o[1]?o[0]:y.a.createElement(l["a"],{title:o.splice(1,o.length-1).join(",")},y.a.createElement("a",null,o[0])):"\u6682\u65e0"}})])},3:{title:"\u8003\u8bd5\u4f5c\u5e9f",privName:"exam_abate",tableName:F,tableColumns:[{key:"operation",title:"\u64cd\u4f5c",default:!0,customRender:function(e,t,n){return y.a.createElement(j["a"],{privs:["drop_study"],noMatch:"\u9000\u5b66"},y.a.createElement("a",{onClick:function(){return m["a"].confirm({title:"\u5b66\u5458\u9000\u5b66",content:"\u786e\u5b9a\u8981\u8ba9\u3010"+t[N["a"].STUDENT.NAME.key]+"\u3011\u9000\u5b66\uff1f",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){return pe(t,87)},onCancel:function(){}})}},y.a.createElement(u["a"],{type:"close-circle"})," \u9000\u5b66"))}},f()({},N["a"].STUDENT.NAME,{default:!0,customRender:function(e,t,n){return y.a.createElement(j["a"],{privs:["abate_edit"],noMatch:e},y.a.createElement("a",{onClick:function(e){z(t),O(!0)}},e))}})].concat(B,[N["a"].STUDENT.EXAM_COACH_ID])},4:{title:"\u8fc7\u671f\u4f5c\u5e9f",privName:"exam_abate",tableName:Z,tableColumns:[{key:"operation",title:"\u64cd\u4f5c",default:!0,customRender:function(e,t,n){return y.a.createElement(j["a"],{privs:["drop_study"],noMatch:"\u9000\u5b66"},y.a.createElement("a",{onClick:function(){return m["a"].confirm({title:"\u5b66\u5458\u9000\u5b66",content:"\u786e\u5b9a\u8981\u8ba9\u3010"+t[N["a"].STUDENT.NAME.key]+"\u3011\u9000\u5b66\uff1f",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){return pe(t,83)},onCancel:function(){}})}},y.a.createElement(u["a"],{type:"close-circle"})," \u9000\u5b66"))}},f()({},N["a"].STUDENT.NAME,{default:!0,customRender:function(e,t,n){return y.a.createElement(j["a"],{privs:["abate_edit"],noMatch:e},y.a.createElement("a",{onClick:function(e){z(t),O(!0)}},e))}})].concat(B,[N["a"].STUDENT.EXAM_COACH_ID])}},se=function(){return Object.keys(Ee).map(function(e){return y.a.createElement(K,{key:e},Ee[e].title)})},de=Object(_["useMemo"])(function(){return Q.map(function(e){return y.a.createElement(D["a"],i()({},e,{form:n}))})},[n]),Te=function(e){return t({type:"studentExam/saveExamScoreEdit",payload:e}).finally(function(){ue(!0)})},fe=function(e){return t({type:"studentExam/deleteExamScoreOutliers",payload:{id:e}}).finally(function(){ue(!0)})},pe=function(e,n){var a=e.studentId;return t({type:"studentExam/dropOutStudent",payload:{studentId:a,reason:n}}).finally(function(){ue(!0)})},_e=function(e){return t({type:"studentExam/graduateStudent",payload:{studentIds:e}}).finally(function(){ue(!0)})};return y.a.createElement(_["Fragment"],null,y.a.createElement(S["a"],null,y.a.createElement("div",{className:q.a.main},y.a.createElement("div",{className:q.a.leftmenu},y.a.createElement(p["b"],{mode:"inline",onClick:function(e){return x(e.key)},selectedKeys:[M]},se())),y.a.createElement("div",{className:q.a.right},Object.keys(Ee).map(function(t){return M===t&&y.a.createElement(A["a"],i()({key:t},e,{tableName:Ee[t].tableName,tableActions:Ee[t].tableActions,originColumns:Ee[t].tableColumns,formFields:de,columnSortable:!1,selectedRows:Ee[t].selectedRows,setSelectedRows:Ee[t].setSelectedRows,scroll:{x:"max-content"},needUpdate:le,setNeedUpdate:ue}))})))),y.a.createElement(v,{selectedRow:G,visible:U,setVisible:O,loading:R,onSubmit:function(e){console.log(e),I(!0),Te(e).then(function(e){I(!1),!1!==e&&O(!1)})}}),y.a.createElement(w,{visible:ee,setVisible:te,loading:oe,dispatch:t,onSubmit:function(){ce(!1),ue(!0)}}))};t["default"]=Object(k["connect"])(function(e){var t,n=e[L],a=e[V],o=e[F],r=e[H],i=e[Z],l=e.quickEntryParams,u=e.loading,m=e.global;return t={},c()(t,L,n),c()(t,V,a),c()(t,F,o),c()(t,H,r),c()(t,Z,i),c()(t,"quickEntryParams",l),c()(t,"loading",u),c()(t,"global",m),t})(a["a"].create()(J))},NXjg:function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),o=n.n(a),c=n("zHco"),r=n("Y2fQ"),i=n("usdK"),l=function(e){var t=e.match,n=e.children,a=e.location,l=(e.dispatch,[{privName:"order_exam_manage",key:"appointment",tab:"\u7ea6\u8003\u7ba1\u7406"},{privName:"grade_manage",key:"score",tab:"\u6210\u7ee9\u7ba1\u7406"}]),u=function(e){i["a"].push("".concat(t.url,"/").concat(e))};return o.a.createElement(c["a"],{title:o.a.createElement(r["FormattedMessage"],{id:"menu.student.exam"}),tabList:l,tabActiveKey:a.pathname.replace("".concat(t.path,"/"),""),onTabChange:u},n)};t["default"]=l},eEom:function(e,t,n){"use strict";n.r(t);n("y8nQ");var a=n("Vl3Y"),o=n("eHn4"),c=n.n(o),r=n("jehZ"),i=n.n(r),l=n("p0pE"),u=n.n(l),m=(n("2qtc"),n("kLXV")),E=(n("+L6B"),n("2/Rp")),s=n("qIgq"),d=n.n(s),T=(n("lUTK"),n("BvKs")),f=n("q1tI"),p=n.n(f),_=n("MuoO"),y=n("v99g"),k=n("myFP"),S=n("mGJS"),A=n("usdK"),D=n("9vKQ"),b=(n("14J3"),n("BMrR")),N=(n("jCWc"),n("kPKH")),M=function(e){var t=e.selectedRow,n=e.onSubmit,o=e.visible,r=e.setVisible,l=e.form,E=e.loading,s=function(e){e.preventDefault(),l.validateFields(function(e,a){var o;if(e)return!1;n(u()({},a,(o={id:t.id},c()(o,D["a"].STUDENT.EXAM_APPOINT_DATE.key,a[D["a"].STUDENT.EXAM_APPOINT_DATE.key].format("YYYY-MM-DD")),c()(o,D["a"].STUDENT.EXAM_DATE.key,a[D["a"].STUDENT.EXAM_DATE.key].format("YYYY-MM-DD")),o)))})},d=function(e){e.preventDefault(),r(!1)};return p.a.createElement(m["a"],{destroyOnClose:!0,title:(t[D["a"].STUDENT.NAME.key]?"\u4fee\u6539":"\u5f55\u5165")+"\u7ea6\u8003\u4fe1\u606f",width:"90%",visible:o,onOk:s,onCancel:d,closable:!0,maskClosable:!1,keyboard:!1,confirmLoading:E,okText:"\u63d0\u4ea4",cancelText:"\u53d6\u6d88"},p.a.createElement(a["a"],{onSubmit:s},p.a.createElement(b["a"],{gutter:24},[D["a"].STUDENT.NAME,u()({},D["a"].STUDENT.EXAM_STUDY_ID,{notRequired:!0}),D["a"].STUDENT.IDCARD_NO,D["a"].STUDENT.EXAM_CAR_TYPE,u()({},D["a"].STUDENT.EXAM_KM),D["a"].STUDENT.EXAM_PLACE,D["a"].STUDENT.EXAM_APPOINT_DATE,D["a"].STUDENT.EXAM_DATE,u()({},D["a"].STUDENT.EXAM_TIME,{values:[{dKey:"\u4e0a\u5348",dValue:"\u4e0a\u5348"},{dKey:"\u4e0b\u5348",dValue:"\u4e0b\u5348"}]})].map(function(n){return p.a.createElement(N["a"],{md:8,sm:24,key:n.key},p.a.createElement(S["a"],i()({},e,{config:n,form:l,values:n.values,initialValue:t[n.key],rules:[{required:!n.notRequired,message:"\u8be5\u9879\u4e3a\u5fc5\u586b"}]})))}))))},x=a["a"].create()(M),g=(n("DZo9"),n("8z0m")),v=(n("Pwec"),n("CtXQ")),C=(n("miYZ"),n("tsqr")),U=n("2ZYJ"),O=n("Z2nI"),h=n("Plse"),X=n("t3Un"),R=function(e){e.selectedRow;var t=e.onSubmit,n=e.visible,o=e.setVisible,c=e.form,r=e.loading,i=function(e){e.preventDefault(),c.validateFields(function(e,n){if(e)return!1;t(n)})},l=function(e){e.preventDefault(),o(!1)},u={name:"file",action:"".concat(U["b"],"/api/student/exam/import"),onChange:function(e){if(e.file.status,"done"===e.file.status){var n=Object(O["a"])(e.file.response)(h["a"].UPLOAD);!1!==n&&(o(!1),t())}else"error"===e.file.status&&C["a"].error("".concat(e.file.name," \u4e0a\u4f20\u5931\u8d25\uff01"))},headers:Object(X["b"])()};return p.a.createElement(m["a"],{destroyOnClose:!0,title:"\u5bfc\u5165\u7ea6\u8003\u4fe1\u606f\u8868",width:350,visible:n,onOk:i,onCancel:l,closable:!0,maskClosable:!1,keyboard:!1,footer:null,confirmLoading:r,okText:"\u63d0\u4ea4",cancelText:"\u53d6\u6d88"},p.a.createElement(a["a"],{onSubmit:i},p.a.createElement(b["a"],{gutter:24},p.a.createElement(N["a"],null,p.a.createElement(g["a"],u,p.a.createElement(E["a"],null,p.a.createElement(v["a"],{type:"upload"})," \u9009\u62e9\u7ea6\u8003\u4fe1\u606f\u8868"))))))},I=a["a"].create()(R),w=function(e){e.selectedRows;var t=e.onSubmit,n=e.visible,o=e.setVisible,r=e.form,l=e.loading,E=function(e){e.preventDefault(),r.validateFields(function(e,n){if(e)return!1;var a=c()({},D["a"].STUDENT.EXAM_DATE.key,n[D["a"].STUDENT.EXAM_DATE.key].format("YYYY-MM-DD"));n[D["a"].STUDENT.EXAM_CAR_TYPE.key].length&&(a[D["a"].STUDENT.EXAM_CAR_TYPE.key]=n[D["a"].STUDENT.EXAM_CAR_TYPE.key].join(",")),n[D["a"].STUDENT.EXAM_KM.key].length&&(a[D["a"].STUDENT.EXAM_KM.key]=n[D["a"].STUDENT.EXAM_KM.key].join(",")),t(a)})},s=function(e){e.preventDefault(),o(!1)};return p.a.createElement(m["a"],{destroyOnClose:!0,title:"\u5bfc\u51fa\u7ea6\u8003\u4fe1\u606f\u8868",visible:n,onOk:E,onCancel:s,closable:!0,maskClosable:!1,keyboard:!1,confirmLoading:l,okText:"\u63d0\u4ea4",cancelText:"\u53d6\u6d88"},p.a.createElement(a["a"],{onSubmit:E},p.a.createElement(b["a"],{gutter:24},[D["a"].STUDENT.EXAM_DATE,u()({},D["a"].STUDENT.EXAM_CAR_TYPE,{type:"checkbox"}),u()({},D["a"].STUDENT.EXAM_KM,{type:"checkbox"})].map(function(t){return p.a.createElement(N["a"],{md:24,sm:24,key:t.key},p.a.createElement(S["a"],i()({},e,{config:t,form:r,values:t.values,rules:[{required:!0,message:"\u8be5\u9879\u4e3a\u5fc5\u586b"}],style:{marginBottom:0}})))}))))},P=a["a"].create()(w),j=n("tS4M"),Y=n("uY7g"),q=n("uCI1"),K=n.n(q),L=T["b"].Item,V="examAppointment_1",F="examAppointment_2",H="examAppointment_3",Z=function(e){var t=Object(f["useState"])([]),n=d()(t,2),a=n[0],o=n[1],c=function(){return Object.keys(le).map(function(e){return p.a.createElement(L,{key:e},le[e].title)})},r=e.dispatch,l=e.form,s=e.loading,_=e.quickEntryParams,b=Object(f["useState"])("0"),N=d()(b,2),M=N[0],g=N[1],v=Object(f["useState"])(!1),C=d()(v,2),U=C[0],O=C[1],h=Object(f["useState"])({}),X=d()(h,2),R=X[0],w=X[1],q=Object(f["useState"])(!1),Z=d()(q,2),B=Z[0],Q=Z[1],J=Object(f["useState"])(!1),G=d()(J,2),z=G[0],W=G[1],$=Object(f["useState"])(!1),ee=d()($,2),te=ee[0],ne=ee[1],ae=Object(f["useState"])(!1),oe=d()(ae,2),ce=oe[0],re=oe[1],ie=[D["a"].STUDENT.EXAM_STUDY_ID,D["a"].STUDENT.IDCARD_NO,D["a"].STUDENT.EXAM_COACH_ID,D["a"].STUDENT.EXAM_KM,D["a"].STUDENT.EXAM_CAR_TYPE,D["a"].STUDENT.EXAM_APPOINT_DATE,D["a"].STUDENT.EXAM_DATE,D["a"].STUDENT.EXAM_TIME,D["a"].STUDENT.EXAM_PLACE,D["a"].STUDENT.MOBILE],le={0:{title:"\u7ea6\u8003\u4e2d",privName:"exam",tableName:V,selectedRows:a,setSelectedRows:o,tableActions:[p.a.createElement(Y["a"],{privs:["export_exam"],key:"export"},p.a.createElement(E["a"],{key:"export",icon:"download",htmlType:"button",type:"primary",onClick:function(){ne(!0)}},"\u5bfc\u51fa")),p.a.createElement(Y["a"],{privs:["record_order_exam"],key:"record_order_exam"},p.a.createElement(E["a"],{key:"input",icon:"edit",htmlType:"button",type:"primary",onClick:function(){w({}),O(!0)}},"\u5f55\u5165\u7ea6\u8003\u4fe1\u606f")),p.a.createElement(Y["a"],{privs:["import_exam_info"],key:"import_exam_info"},p.a.createElement(E["a"],{key:"import",icon:"upload",htmlType:"button",type:"primary",onClick:function(){return Q(!0)}},"\u5bfc\u5165\u7ea6\u8003\u4fe1\u606f")),p.a.createElement(Y["a"],{privs:["order_exam_delete"],key:"order_exam_delete"},p.a.createElement(E["a"],{disabled:!a.length,key:"delete",icon:"delete",htmlType:"button",type:"primary",onClick:function(){console.log(a.length);a.map(function(e){return e.name});var e=a.map(function(e){return e.id});m["a"].confirm({title:"\u786e\u5b9a\u8981\u5220\u9664\u9009\u4e2d\u7684\u7ea6\u8003\u4fe1\u606f\u5417\uff1f",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){return fe({ids:e.join(",")})},onCancel:function(){}})}},"\u6279\u91cf\u5220\u9664")),p.a.createElement(Y["a"],{privs:["download_templete"],key:"download_templete"},p.a.createElement(E["a"],{key:"download",icon:"download",htmlType:"button",type:"default",onClick:function(){return A["a"].push("/user-center/template-download")}},"\u4e0b\u8f7d\u5bfc\u5165\u6a21\u677f"))],originColumns:[{key:"operation",title:"\u64cd\u4f5c",customRender:function(e,t,n){return p.a.createElement(Y["a"],{privs:["order_exam_delete"],noMatch:"\u5220\u9664"},p.a.createElement("a",{key:"delete",onClick:function(){m["a"].confirm({title:"\u786e\u5b9a\u8981\u5220\u9664\u3010"+t[D["a"].STUDENT.NAME.key]+"\u3011\u7684\u8fd9\u6761\u7ea6\u8003\u4fe1\u606f\u5417\uff1f",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){return de(t.id)},onCancel:function(){}})}},"\u5220\u9664"))}},u()({},D["a"].STUDENT.NAME,{customRender:function(e,t,n){return p.a.createElement(Y["a"],{privs:["order_exam_edit"],noMatch:e},p.a.createElement("a",{onClick:function(e){e.stopPropagation(),w(t),O(!0)}},e))}})].concat(ie)},1:{title:"\u5df2\u8003\u8bd5",tableName:F,privName:"complete_exam",originColumns:[{key:"operation",title:"\u64cd\u4f5c",customRender:function(e,t,n){return p.a.createElement(Y["a"],{privs:["delete_complete_exam"],noMatch:"\u5220\u9664"},p.a.createElement("a",{key:"delete",onClick:function(){m["a"].confirm({title:"\u786e\u5b9a\u8981\u5220\u9664\u3010"+t[D["a"].STUDENT.NAME.key]+"\u3011\u7684\u8fd9\u6761\u7ea6\u8003\u4fe1\u606f\u5417\uff1f",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){return de(t.id)},onCancel:function(){}})}},"\u5220\u9664"))}},u()({},D["a"].STUDENT.NAME,{customRender:function(e,t,n){return p.a.createElement(Y["a"],{privs:["edit_complete_exam"],noMatch:e},p.a.createElement("a",{onClick:function(e){e.stopPropagation(),w(t),O(!0)}},e))}})].concat(ie)},2:{title:"\u5f02\u5e38\u6570\u636e",privName:"exception_data_manage",tableName:H,tableActions:[p.a.createElement(Y["a"],{privs:["exception_data_clean"],key:"exception_data_clean"},p.a.createElement(E["a"],{key:"delete",icon:"delete",htmlType:"button",type:"primary",onClick:function(){m["a"].confirm({title:"\u6e05\u7a7a\u5f02\u5e38\u6570\u636e",content:"\u786e\u5b9a\u8981\u6e05\u7a7a\u6240\u6709\u5f02\u5e38\u6570\u636e\u5417\uff1f",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){return Te()},onCancel:function(){}})}},"\u6e05\u7a7a\u5f02\u5e38\u6570\u636e"))],originColumns:[{key:"operation",title:"\u64cd\u4f5c",customRender:function(e,t,n){return p.a.createElement(Y["a"],{privs:["exception_data_delete"],noMatch:"\u5220\u9664"},p.a.createElement("a",{key:"delete",onClick:function(){m["a"].confirm({title:"\u786e\u5b9a\u8981\u5220\u9664\u3010"+t[D["a"].STUDENT.NAME.key]+"\u3011\u7684\u8fd9\u6761\u7ea6\u8003\u4fe1\u606f\u5417\uff1f",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){return de(t.id)},onCancel:function(){}})}},"\u5220\u9664"))}},u()({},D["a"].STUDENT.NAME,{customRender:function(e,t,n){return p.a.createElement(Y["a"],{privs:["exception_data_edit"],noMatch:e},p.a.createElement("a",{onClick:function(e){e.stopPropagation(),w(t),O(!0)}},e))}})].concat(ie)}};Object(j["useEffectOnce"])(function(){"record"===_?(w({}),O(!0)):"import"===_&&Q(!0),r({type:"quickEntryParams/clearParams"})});var ue=[{config:D["a"].STUDENT.EXAM_APPOINT_DATE_RANGE,col:9},{config:D["a"].STUDENT.EXAM_DATE,col:9},{config:D["a"].STUDENT.EXAM_CAR_TYPE},{config:D["a"].STUDENT.EXAM_KM},{config:D["a"].STUDENT.EXAM_COACH_ID},{config:D["a"].STUDENT.QUICK_SEARCH}],me=Object(f["useMemo"])(function(){return ue.map(function(e){return p.a.createElement(S["a"],i()({},e,{form:l}))})},[l]),Ee=function(e){g(e)},se=function(e){return r({type:"studentExam/saveExamAppointmentEdit",payload:e}).finally(function(){re(!0)})},de=function(e){return r({type:"studentExam/deleteExamAppointment",payload:{id:e}}).finally(function(){re(!0)})},Te=function(e){return r({type:"studentExam/clearExamAppointmentOutliers",payload:e}).finally(function(){re(!0)})},fe=function(e){return r({type:"studentExam/deleteAllExamAppointment",payload:e}).finally(function(){re(!0)})},pe=function(e){return r({type:"studentExam/exportExamAppointment",payload:e}).then(function(e){return!1!==e&&window.open(e),e})};return p.a.createElement(f["Fragment"],null,p.a.createElement(y["a"],null,p.a.createElement("div",{className:K.a.main},p.a.createElement("div",{className:K.a.leftmenu},p.a.createElement(T["b"],{mode:"inline",onClick:function(e){return Ee(e.key)},selectedKeys:[M]},c())),p.a.createElement("div",{className:K.a.right},Object.keys(le).map(function(t){return M===t&&p.a.createElement(k["a"],i()({key:t},e,{tableName:le[t].tableName,tableActions:le[t].tableActions,originColumns:le[t].originColumns,formFields:me,columnSortable:!1,selectedRows:le[t].selectedRows,setSelectedRows:le[t].setSelectedRows,scroll:{x:"max-content"},needUpdate:ce,setNeedUpdate:re}))})))),p.a.createElement(x,{selectedRow:R,visible:U,setVisible:O,loading:s.effects["studentExam/saveExamAppointmentEdit"],onSubmit:function(e){console.log(e),se(e).then(function(e){!1!==e&&O(!1)})}}),p.a.createElement(I,{visible:B,setVisible:Q,loading:z,onSubmit:function(){W(!1),re(!0)}}),p.a.createElement(P,{visible:te,setVisible:ne,loading:s.effects["studentExam/exportExamAppointment"],onSubmit:function(e){console.log(e),pe(e).then(function(e){return!1!==e&&ne(!1),e})}}))};t["default"]=Object(_["connect"])(function(e){var t,n=e[V],a=e[F],o=e[H],r=e.quickEntryParams,i=e.loading,l=e.global;return t={},c()(t,V,n),c()(t,F,a),c()(t,H,o),c()(t,"quickEntryParams",r),c()(t,"loading",i),c()(t,"global",l),t})(a["a"].create()(Z))},uCI1:function(e,t,n){e.exports={main:"antd-pro-pages-student-exam-exam-main",leftmenu:"antd-pro-pages-student-exam-exam-leftmenu",right:"antd-pro-pages-student-exam-exam-right",title:"antd-pro-pages-student-exam-exam-title"}}}]);