(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"2SDg":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderMarkerComponent=t.getPropValue=t.MarkerAllProps=t.MarkerConfigurableProps=void 0;var r=n("7LDH"),o=n("q1tI"),a=s(o),i=n("i8i4"),l=n("eB3W"),u=s(l);function s(e){return e&&e.__esModule?e:{default:e}}var c=t.MarkerConfigurableProps=["position","offset","icon","content","draggable","visible","zIndex","angle","animation","shadow","title","clickable","extData","label"],f=t.MarkerAllProps=c.concat(["topWhenClick","bubble","raiseOnDrag","cursor","autoRotation","shape"]);t.getPropValue=function(e,t){return-1===f.indexOf(e)?null:"position"===e?(0,r.toLnglat)(t):"offset"===e?(0,r.toPixel)(t):t},t.renderMarkerComponent=function(e,t){var n=e;if((0,u.default)(e)){var r=t.getExtData();n=e(r)}n&&(0,i.render)(a.default.createElement("div",null,n),t.getContent())}},"6NGk":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n("q1tI"),a=c(o),i=n("79gr"),l=c(i),u=n("pLQl"),s=c(u);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(e){f(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return"undefined"!==typeof window&&(e.__map__?(n.map=e.__map__,n.loadToolInstance().then(function(){n.props.onInstanceCreated&&n.props.onInstanceCreated()})):s.default.warning("MAP_INSTANCE_REQUIRED")),n}return d(t,e),r(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"loadToolInstance",value:function(){var e=this;return new Promise(function(t){e.map.plugin(["AMap.MouseTool"],function(){e.tool=new window.AMap.MouseTool(e.map),t()})})}},{key:"render",value:function(){return null}},{key:"instance",get:function(){return this.tool}}]),t}(a.default.Component);t.default=(0,l.default)(h)},"79gr":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n("q1tI"),i=s(a),l=n("rk/D"),u=s(l);function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(e){return function(t){function n(e){c(this,n);var t=f(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.instanceCreated=!1,t.myMapComponent=null,t.registeredEvents=[],t.onInstanceCreated=t.onInstanceCreated.bind(t),t}return p(n,t),o(n,[{key:"onInstanceCreated",value:function(){if(this.instanceCreated=!0,"events"in this.props){var e=this.myMapComponent.instance;this.props.events.created&&this.props.events.created(e)}this.reactivePropChange(this.props,!1)}},{key:"createEventsProxy",value:function(e){var t=this,n=this.myMapComponent.instance,r=Object.keys(e.events||{});r.length&&r.forEach(function(e){-1===t.registeredEvents.indexOf(e)&&(t.registeredEvents.push(e),n.on(e,function(e){return function(){if(t.props.events&&e in t.props.events){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];t.props.events[e].apply(null,r)}}}(e)))})}},{key:"componentWillReceiveProps",value:function(e){this.reactivePropChange(e,!0)}},{key:"reactivePropChange",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.instanceCreated)return!1;var r=this.myMapComponent,o=r.setterMap,a=void 0===o?{}:o,i=r.converterMap,l=void 0===i?{}:i,s=r.instance,c=void 0===s?{}:s,f=Object.keys(e);f.length&&f.forEach(function(r){if("events"===r)return t.createEventsProxy(e);var o=!0;if(n&&(o=t.detectPropChange(r,e,t.props)),!o)return!1;var i=e[r];if(r in l&&(i=l[r](e[r])),r in a)a[r](i);else{var s="set"+(0,u.default)(r);s in c&&c[s](i)}})}},{key:"detectPropChange",value:function(e,t,n){return t[e]!==n[e]}},{key:"render",value:function(){var t=this;return i.default.createElement(e,r({onInstanceCreated:this.onInstanceCreated,ref:function(e){t.myMapComponent=e}},this.props))}},{key:"componentWillUnmount",value:function(){var e=this.myMapComponent.instance;e&&("destroy"in e&&setTimeout(function(){e.destroy()},10),"hide"in e&&e.hide(),"__map__"in this.props&&"setMap"in e&&e.setMap(null))}}]),n}(i.default.Component)}t.default=d},"7DBZ":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MouseTool=t.Marker=t.GroundImage=t.InfoWindow=t.PolyEditor=t.Polyline=t.Polygon=t.CircleEditor=t.Circle=t.Markers=t.Map=void 0;var r=n("IENb"),o=C(r),a=n("VAeg"),i=C(a),l=n("YEbH"),u=C(l),s=n("g4Dz"),c=C(s),f=n("mHyM"),p=C(f),d=n("sC/+"),h=C(d),y=n("ooyC"),m=C(y),v=n("EnLi"),E=C(v),b=n("fqIc"),k=C(b),_=n("ZCYf"),g=C(_),S=n("6NGk"),w=C(S);function C(e){return e&&e.__esModule?e:{default:e}}t.Map=o.default,t.Markers=u.default,t.Circle=c.default,t.CircleEditor=k.default,t.Polygon=p.default,t.Polyline=h.default,t.PolyEditor=g.default,t.InfoWindow=m.default,t.GroundImage=E.default,t.Marker=i.default,t.MouseTool=w.default,t.default={Map:o.default,Markers:u.default,Circle:c.default,CircleEditor:k.default,Polygon:p.default,Polyline:h.default,PolyEditor:g.default,InfoWindow:m.default,GroundImage:E.default,Marker:i.default,MouseTool:w.default}},"7LDH":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="undefined"!==typeof window,o=t.toLnglat=function(e){if(!e)return e;if("getLng"in e&&"getLat"in e)return e;var t=0,n=0;return"[object Array]"==={}.toString.call(e)?(t=e[0],n=e[1]):"lng"in e&&"lat"in e?(t=e.lng,n=e.lat):"longitude"in e&&"latitude"in e&&(t=e.longitude,n=e.latitude),r?new window.AMap.LngLat(t,n):null},a=t.toPixel=function(e){if(!e)return e;if("getX"in e&&"getY"in e)return e;var t=0,n=0;return"[object Array]"==={}.toString.call(e)?(t=e[0],n=e[1]):"x"in e&&"y"in e&&(t=e.x,n=e.y),r?new window.AMap.Pixel(t,n):null},i=t.toSize=function(e){return e?"getWidth"in e?e:r?new window.AMap.Size(e.width,e.height):null:e};t.default={toLnglat:o,toPixel:a,toSize:i}},EnLi:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n("q1tI"),a=c(o),i=n("79gr"),l=c(i),u=n("pLQl"),s=c(u);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h={clickable:!1,opacity:1,visible:!0},y=function(e){function t(e){f(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if("undefined"!==typeof window)if(e.__map__){var r=n;n.setterMap={visible:function(e){e?r.image&&r.image.show():r.image&&r.image.hide()},src:function(e){r.image.setImageUrl(e)}},n.converterMap={bounds:function(e){return r.buildBounds(e)}},n.map=e.__map__,n.element=n.map.getContainer(),setTimeout(function(){n.createGroundImage(e)},13)}else s.default.warning("MAP_INSTANCE_REQUIRED");return n}return d(t,e),r(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"checkPropsChanged",value:function(e,t){return this.props[t]!==e[t]}},{key:"createGroundImage",value:function(e){var t=void 0,n=void 0,r=void 0,o=void 0;"src"in e?t=e.src:s.default.warning("SRC_REQUIRED",!0),"bounds"in e?n=this.buildBounds(e.bounds):s.default.warning("BOUNDS_REQUIRED",!0),o="clickable"in e?e.clickable:h.clickable,r="opacity"in e?e.opacity:h.opacity,this.image=new window.AMap.GroundImage(t,n,{map:this.map,clickable:o,opacity:r}),this.props.onInstanceCreated&&this.props.onInstanceCreated()}},{key:"buildBounds",value:function(e){if(!e)return e;if("getSouthWest"in e)return e;var t=new window.AMap.Bounds(new window.AMap.LngLat(e.sw.longitude,e.sw.latitude),new window.AMap.LngLat(e.ne.longitude,e.ne.latitude));return t}},{key:"render",value:function(){return null}},{key:"instance",get:function(){return this.image}}]),t}(a.default.Component);t.default=(0,l.default)(y)},IENb:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n("q1tI"),i=m(a),l=n("M0Q7"),u=m(l),s=n("eB3W"),c=m(s),f=n("pLQl"),p=m(f),d=n("7LDH"),h=n("79gr"),y=m(h);function m(e){return e&&e.__esModule?e:{default:e}}function v(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function k(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=i.default.Component,g=i.default.Children,S={width:"100%",height:"100%"},w={width:"100%",height:"100%",position:"relative"},C=["layers","zoom","center","labelzIndex","mapStyle","features","cursor","pitch"],M=["animateEnable","doubleClickZoom","dragEnable","isHotspot","jogEnable","keyboardEnable","resizeEnable","rotateEnable","scrollWheel","touchZoom","zoomEnable"],A=["view","zooms","showIndoorMap","indoorMap","expandZoomRange","showBuildingBlock","viewMode","pitchEnable","buildingAnimation","skyColor"],T=C.concat(M,A),O={MapType:{showRoad:!1,showTraffic:!1,defaultType:0},ToolBar:{position:"RB",noIpLocate:!0,locate:!0,liteStyle:!0,autoPosition:!1},OverView:{},ControlBar:{}},P=function(e){function t(e){E(this,t);var n=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={mapLoaded:!1};var r=n;return n.setterMap={zoom:function(e){r.map.setZoom(e)},cursor:function(e){r.map.setDefaultCursor(e)},labelzIndex:function(e){r.map.setlabelzIndex(e)}},n.converterMap={center:d.toLnglat},"undefined"!==typeof window&&(n.pluginMap={},new u.default({key:e.amapkey,useAMapUI:e.useAMapUI,version:e.version,protocol:e.protocol}).load().then(function(){n.createInstance(),n.state.mapLoaded||n.setState({mapLoaded:!0})})),n}return k(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){this.state.mapLoaded&&this.updateMapProps(this.props,e)}},{key:"renderChildren",value:function(){var e=this;return g.map(this.props.children,function(t){if(t){var n=t.type;return n.preventAmap||"string"===typeof n?t:i.default.cloneElement(t,{__map__:e.map})}return t})}},{key:"createInstance",value:function(){if(!this.map){var e=this.buildCreateOptions();this.map=new window.AMap.Map(this.mapWrapper,e),this.setPlugins(this.props),this.props.onInstanceCreated&&this.props.onInstanceCreated()}}},{key:"buildCreateOptions",value:function(){var e=this,t=this.props,n={};return T.forEach(function(r){r in t&&(n[r]=e.getSetterValue(r,t))}),n}},{key:"updateMapProps",value:function(e,t){var n=this,r={},o=!1,a=!1;M.forEach(function(i){i in t&&(a=!0,n.detectPropChanged(i,e,t)&&(o=!0,r[i]=t[i]))}),o&&this.map.setStatus(r),a&&"status"in t&&p.default.warning("\u4ee5\u4e0b\u8fd9\u4e9b\u5c5e\u6027\u53ef\u4ee5\u5355\u72ec\u63d0\u4f9b\u8fdb\u884c\u914d\u7f6e\uff0c\u4e5f\u53ef\u4ee5\u7edf\u4e00\u4f5c\u4e3a\u2018status\u2019\u5c5e\u6027\u914d\u7f6e\uff1b\u4f46\u662f\u8bf7\u4e0d\u8981\u540c\u65f6\u4f7f\u7528\u8fd9\u4e24\u79cd\u65b9\u5f0f\u3002\n\uff08"+M.join(", ")+"\uff09"),A.forEach(function(r){r in t&&n.detectPropChanged(r,e,t)&&p.default.warning("'"+r+"' \u662f\u4e00\u4e2a\u9759\u6001\u5c5e\u6027\uff0c\u5730\u56fe\u5b9e\u4f8b\u521b\u5efa\u6210\u529f\u540e\u65e0\u6cd5\u4fee\u6539")}),this.setPlugins(t)}},{key:"getSetterValue",value:function(e,t){return e in this.converterMap?this.converterMap[e](t[e]):t[e]}},{key:"detectPropChanged",value:function(e,t,n){return t[e]!==n[e]}},{key:"setPlugins",value:function(e){var t=this,n=["Scale","ToolBar","MapType","OverView","ControlBar"];if("plugins"in e){var r=e.plugins;r&&r.length&&r.forEach(function(e){var r=void 0,o=void 0,a=void 0;"string"===typeof e?(r=e,o=null,a=!0):(r=e.name,o=e.options||{},a=!("visible"in o&&"boolean"===typeof o.visible)||o.visible,delete o.visible);var i=n.indexOf(r);-1===i?p.default.warning("\u6ca1\u6709 \u2018"+r+"\u2019 \u8fd9\u4e2a\u63d2\u4ef6\uff0c\u8bf7\u68c0\u67e5\u662f\u5426\u62fc\u5199\u9519\u8bef"):a&&(n.splice(i,1),t.installPlugin(r,o))})}this.removeOrDisablePlugins(n)}},{key:"removeOrDisablePlugins",value:function(e){var t=this;e&&e.length&&e.forEach(function(e){e in t.pluginMap&&("ControlBar"===e?(t.map.removeControl(t.pluginMap[e]),delete t.pluginMap[e]):t.pluginMap[e].hide())})}},{key:"installPlugin",value:function(e,t){switch(t=t||{},e){case"Scale":case"ToolBar":case"OverView":case"MapType":this.setMapPlugin(e,t);break;case"ControlBar":this.setControlBar(t);break;default:}}},{key:"setMapPlugin",value:function(e,t){var n=this;if(this.pluginMap[e])this.pluginMap[e].show();else{var o=t.onCreated,a=v(t,["onCreated"]),i=r({},O[e],a);this.map.plugin(["AMap."+e],function(){n.pluginMap[e]=new window.AMap[e](i),n.map.addControl(n.pluginMap[e]),(0,c.default)(o)&&o(n.pluginMap[e])})}}},{key:"setControlBar",value:function(e){var t=this;if(this.pluginMap.ControlBar);else{var n=e.onCreated,o=v(e,["onCreated"]),a=r({},O.ControlBar,o);this.map.plugin(["AMap.ControlBar"],function(){t.pluginMap.ControlBar=new window.AMap.ControlBar(a),t.map.addControl(t.pluginMap.ControlBar),(0,c.default)(n)&&n(t.pluginMap.ControlBar)})}}},{key:"render",value:function(){var e=this;return i.default.createElement("div",{style:w},i.default.createElement("div",{ref:function(t){e.mapWrapper=t},style:S},this.state.mapLoaded?null:this.props.loading||null),i.default.createElement("div",null,this.state.mapLoaded?this.renderChildren():null))}},{key:"instance",get:function(){return this.map}}]),t}(_);t.default=(0,y.default)(P)},M0Q7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i={v:"1.4.0",hostAndPath:"webapi.amap.com/maps",key:"f97efc35164149d0c0f299e7a8adb3d2",callback:"__amap_init_callback",useAMapUI:!1},l=null,u=null,s=!1,c=function(){function e(t){var n=t.key,o=t.useAMapUI,l=t.version,u=t.protocol;a(this,e),this.config=r({},i,{useAMapUI:o,protocol:u}),"undefined"!==typeof window&&(n?this.config.key=n:"amapkey"in window&&(this.config.key=window.amapkey)),l&&(this.config.v=l),this.protocol=u||window.location.protocol,-1===this.protocol.indexOf(":")&&(this.protocol+=":")}return o(e,[{key:"getScriptSrc",value:function(e){return this.protocol+"//"+e.hostAndPath+"?v="+e.v+"&key="+e.key+"&callback="+e.callback}},{key:"buildScriptTag",value:function(e){var t=document.createElement("script");return t.type="text/javascript",t.async=!0,t.defer=!0,t.src=e,t}},{key:"getAmapuiPromise",value:function(){var e=this.buildScriptTag(this.protocol+"//webapi.amap.com/ui/1.0/main-async.js"),t=new Promise(function(t){e.onload=function(){t()}});return document.body.appendChild(e),t}},{key:"getMainPromise",value:function(){var e=this,t=this.buildScriptTag(this.getScriptSrc(this.config)),n=new Promise(function(t){window[e.config.callback]=function(){t(),delete window[e.config.callback]}});return document.body.appendChild(t),n}},{key:"load",value:function(){if("undefined"===typeof window)return null;var e=this.config.useAMapUI;return l=l||this.getMainPromise(),e&&(u=u||this.getAmapuiPromise()),new Promise(function(t){l.then(function(){e&&u?u.then(function(){window.initAMapUI&&!s&&(window.initAMapUI(),"function"===typeof e&&e(),s=!0),t()}):t()})})}}]),e}();t.default=c},VAeg:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n("q1tI"),i=h(a),l=n("i8i4"),u=n("pLQl"),s=h(u),c=n("79gr"),f=h(c),p=n("2SDg"),d=n("7LDH");function h(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var E=function(e){function t(e){y(this,t);var n=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if("undefined"!==typeof window)if(e.__map__){var r=n;n.setterMap={visible:function(e){e?r.marker&&r.marker.show():r.marker&&r.marker.hide()},zIndex:function(e){r.marker&&r.marker.setzIndex(e)}},n.converterMap={position:d.toLnglat,offset:d.toPixel},n.map=e.__map__,n.element=n.map.getContainer(),setTimeout(function(){n.createMarker(e)},13)}else s.default.warning("MAP_INSTANCE_REQUIRED");return n}return v(t,e),o(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentWillReceiveProps",value:function(e){this.map&&this.refreshMarkerLayout(e)}},{key:"createMarker",value:function(e){var t=this.buildCreateOptions(e);this.marker=new window.AMap.Marker(t),this.marker.render=function(e){return function(t){(0,p.renderMarkerComponent)(t,e)}}(this.marker),this.props.onInstanceCreated&&this.props.onInstanceCreated(),this.setMarkerLayout(e),this.setChildComponent(e)}},{key:"buildCreateOptions",value:function(e){var t=this,n={};return p.MarkerAllProps.forEach(function(r){r in e&&(n[r]=t.getSetterParam(r,e[r]))}),n.map=this.map,n}},{key:"setMarkerLayout",value:function(e){("render"in e||"children"in e&&e.children)&&(this.createContentWrapper(),"className"in e&&e.className&&(this.contentWrapper.className=e.className))}},{key:"createContentWrapper",value:function(){this.contentWrapper=document.createElement("div"),this.marker.setContent(this.contentWrapper)}},{key:"setChildComponent",value:function(e){if(this.contentWrapper)if("className"in e&&e.className&&(this.contentWrapper.className=e.className),"render"in e)(0,p.renderMarkerComponent)(e.render,this.marker);else if("children"in e){var t=e.children,n="undefined"===typeof t?"undefined":r(t);"undefined"!==n&&this.contentWrapper&&(0,l.render)(i.default.createElement("div",null,t),this.contentWrapper)}}},{key:"refreshMarkerLayout",value:function(e){this.setChildComponent(e)}},{key:"getSetterParam",value:function(e,t){return e in this.converterMap?this.converterMap[e](t):t}},{key:"render",value:function(){return null}},{key:"instance",get:function(){return this.marker}}]),t}(i.default.Component);t.default=(0,f.default)(E)},Y3d9:function(e,t,n){"use strict";n.r(t);n("y8nQ");var r=n("Vl3Y"),o=n("eHn4"),a=n.n(o),i=(n("IzEo"),n("bx4M")),l=n("jehZ"),u=n.n(l),s=(n("T2oS"),n("W9HT")),c=n("p0pE"),f=n.n(c),p=(n("+L6B"),n("2/Rp")),d=n("qIgq"),h=n.n(d),y=n("q1tI"),m=n.n(y),v=n("6y2Z"),E=n("MuoO"),b=n("myFP"),k=n("9vKQ"),_=n("mGJS"),g=n("zHco"),S=n("03Mi"),w=(n("2qtc"),n("kLXV")),C=(n("14J3"),n("BMrR")),M=(n("DZo9"),n("8z0m")),A=(n("jCWc"),n("kPKH")),T=(n("Pwec"),n("CtXQ")),O=(n("miYZ"),n("tsqr")),P=(n("7DBZ"),n("wd/R")),I=n.n(P),j=n("t3Un"),R=n("2Taf"),D=n.n(R),L=n("vZ4D"),x=n.n(L),N=n("l4Ni"),U=n.n(N),W=n("ujKo"),H=n.n(W),B=n("MhPg"),V=n.n(B),Y=function(e){function t(){return D()(this,t),U()(this,H()(t).apply(this,arguments))}return V()(t,e),x()(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("message",function(t){return e.changeLocationHandler(t)},!1)}},{key:"componentWillUnmount",value:function(){var e=this;window.removeEventListener("message",function(t){return e.changeLocationHandler(t)},!1)}},{key:"changeLocationHandler",value:function(e){var t,n=this.props.form,r=e.data;r&&"locationPicker"===r.module&&n.setFieldsValue((t={},a()(t,k["a"].ASSET.LNG.key,r.latlng.lng),a()(t,k["a"].ASSET.LAT.key,r.latlng.lat),t))}},{key:"render",value:function(){var e=this.props,t=e.form,n=e.data;return m.a.createElement(i["a"],{style:{marginBottom:24}},m.a.createElement(C["a"],null,m.a.createElement(A["a"],{xs:4},m.a.createElement(_["a"],{config:k["a"].ASSET.LAT,rules:[{required:!0}],initialValue:n[k["a"].ASSET.LAT.key],form:t,status:"disabled"}),m.a.createElement(_["a"],{config:k["a"].ASSET.LNG,rules:[{required:!0}],initialValue:n[k["a"].ASSET.LNG.key],form:t,status:"disabled"})),m.a.createElement(A["a"],{xs:20},m.a.createElement("iframe",{style:{paddingLeft:50},id:"mapPage",width:"100%",height:800,frameBorder:"0",src:"https://apis.map.qq.com/tools/locpicker?search=1&type=1&key=OWLBZ-2QVKJ-U7EFA-F7P76-KZLM3-BZBHD&referer=myapp"}))))}}]),t}(y["PureComponent"]),Q=Y,z=n("Djev"),G=n("2ZYJ"),q=n("MbOj"),Z=n("TxIl"),F=[k["a"].ASSET.TITLE,k["a"].ASSET.DEPART_ID,f()({},k["a"].ASSET.AREA,{title:"".concat(k["a"].ASSET.AREA.title,"\uff08\u5e73\u7c73\uff09"),type:"inputNumber",max:9999999,min:0}),k["a"].ASSET.PURCHASE_TYPE,k["a"].ASSET.FIRST_PARTY,k["a"].ASSET.PAY_MODE,f()({},k["a"].ASSET.PURCHASE_AMOUNT,{type:"inputNumber",formatter:function(e){return"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},min:0}),k["a"].ASSET.BEGIN_DATE,k["a"].ASSET.END_DATE,k["a"].ASSET.IS_EXAM,f()({},k["a"].ASSET.STATUS),f()({},k["a"].ASSET.LICENSE_TYPE,{mode:"multiple",maxTagCount:3}),k["a"].ASSET.LOCATION,k["a"].ASSET.ADDRESS],X=function(e){var t,n=e.handleSubmit,o=e.visible,i=e.setVisible,l=e.form,s=e.data,c=e.loading,p=e.afterClose;Object(y["useEffect"])(function(){S("undefined"!==typeof s.url?"".concat(s.url):"")},[o]);var d=f()({},s,(t={},a()(t,k["a"].ASSET.STATUS.key,"undefined"!==typeof s[k["a"].ASSET.STATUS.key]?s[k["a"].ASSET.STATUS.key]+"":"1"),a()(t,k["a"].ASSET.LOCATION.key,s[k["a"].ASSET.PROVINCE.key]?[s[k["a"].ASSET.PROVINCE.key],s[k["a"].ASSET.CITY.key],s[k["a"].ASSET.DISTRICT.key]]:[]),a()(t,k["a"].ASSET.LICENSE_TYPE.key,s[k["a"].ASSET.LICENSE_TYPE.key]?s[k["a"].ASSET.LICENSE_TYPE.key].split(","):[]),a()(t,k["a"].ASSET.IS_EXAM.key,s[k["a"].ASSET.IS_EXAM.key]?String(s[k["a"].ASSET.IS_EXAM.key]):"0"),t)),v=Object(z["a"])(d),E=Object(q["a"])(""),b=h()(E,2),g=b[0],S=b[1],P=("".concat(G["b"],"/api/oss/upload"),Object(j["b"])(),function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/gif"===e.type;t||O["a"].error("\u53ea\u80fd\u4e0a\u4f20JPG \u3001JPEG \u3001GIF\u3001 PNG\u683c\u5f0f\u7684\u56fe\u7247");var n=e.size/1024/1024<2;return n||O["a"].error("\u8d85\u8fc72M\u9650\u5236\uff0c\u4e0d\u5141\u8bb8\u4e0a\u4f20"),t&&n}),R=m.a.createElement("div",null,m.a.createElement(T["a"],{type:"plus"}),m.a.createElement("div",{className:"ant-upload-text"})),D=function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?(O["a"].success("".concat(e.file.name," \u4e0a\u4f20\u6210\u529f\uff01")),S(e.file.response.data)):"error"===e.file.status&&O["a"].error("".concat(e.file.name," \u4e0a\u4f20\u5931\u8d25."))},L=function(e){e.preventDefault(),l.validateFields(function(e,t){var r;if(e)return!1;var o=t[k["a"].ASSET.LOCATION.key],i=(r={},a()(r,k["a"].ASSET.MEMO.key,t[k["a"].ASSET.MEMO.key]),a()(r,k["a"].ASSET.TITLE.key,t[k["a"].ASSET.TITLE.key]),a()(r,k["a"].ASSET.DEPART_ID.key,t[k["a"].ASSET.DEPART_ID.key]),a()(r,k["a"].ASSET.AREA.key,t[k["a"].ASSET.AREA.key]),a()(r,k["a"].ASSET.PURCHASE_TYPE.key,t[k["a"].ASSET.PURCHASE_TYPE.key]),a()(r,k["a"].ASSET.PURCHASE_AMOUNT.key,t[k["a"].ASSET.PURCHASE_AMOUNT.key]),a()(r,k["a"].ASSET.PAY_MODE.key,t[k["a"].ASSET.PAY_MODE.key]),a()(r,k["a"].ASSET.FIRST_PARTY.key,t[k["a"].ASSET.FIRST_PARTY.key]),a()(r,k["a"].ASSET.IS_EXAM.key,t[k["a"].ASSET.IS_EXAM.key]),a()(r,k["a"].ASSET.LICENSE_TYPE.key,t[k["a"].ASSET.LICENSE_TYPE.key].join(",")),a()(r,k["a"].ASSET.ADDRESS.key,t[k["a"].ASSET.ADDRESS.key]),a()(r,k["a"].ASSET.LNG.key,t[k["a"].ASSET.LNG.key]),a()(r,k["a"].ASSET.LAT.key,t[k["a"].ASSET.LAT.key]),a()(r,k["a"].ASSET.PROVINCE.key,o[0]),a()(r,k["a"].ASSET.CITY.key,o[1]),a()(r,k["a"].ASSET.DISTRICT.key,o[2]),a()(r,k["a"].ASSET.STATUS.key,t[k["a"].ASSET.STATUS.key]),a()(r,k["a"].ASSET.BEGIN_DATE.key,I()(t[k["a"].ASSET.BEGIN_DATE.key]).format("YYYY-MM-DD")),a()(r,k["a"].ASSET.END_DATE.key,I()(t[k["a"].ASSET.END_DATE.key]).format("YYYY-MM-DD")),a()(r,"url",g()),a()(r,"id",s.id),r);n(i)})};return m.a.createElement(w["a"],{title:s.id?"\u7f16\u8f91\u573a\u5730":"\u65b0\u589e\u573a\u5730",width:"90%",visible:o,afterClose:p,onOk:L,destroyOnClose:!0,confirmLoading:c,closable:!0,maskClosable:!1,keyboard:!1,onCancel:function(){return i(!1)}},m.a.createElement(r["a"],{onSubmit:L},m.a.createElement(C["a"],{gutter:{xs:8,sm:16,md:20}},F.map(function(t){return m.a.createElement(A["a"],{key:t.key,md:t.col||6,sm:24},m.a.createElement(_["a"],u()({config:t,mode:t.mode||null,maxTagCount:t.maxTagCount||0,max:t.max,min:t.min,rules:[{required:!0}],initialValue:v(t)||t.initialValue},e)))}),m.a.createElement(A["a"],{sm:24},m.a.createElement(Q,{form:l,data:s})),m.a.createElement(A["a"],{sm:24},m.a.createElement(r["a"].Item,{label:"\u573a\u5730\u56fe\u7247"},m.a.createElement(M["a"],{name:"file",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,headers:Object(j["b"])(),action:"".concat(G["b"],"/api/oss/upload"),beforeUpload:P,onChange:D},g()&&"undefined"!==typeof g()?m.a.createElement("img",{src:"".concat(Z["b"]).concat(g()),alt:"\u573a\u5730\u56fe\u7247",style:{width:"100%"}}):R))),m.a.createElement(A["a"],{sm:24},m.a.createElement(_["a"],{config:k["a"].ASSET.MEMO,initialValue:v(k["a"].ASSET.MEMO),form:l})))))},J=r["a"].create()(X),K=(n("bP8k"),n("gFTJ")),$=n("QL5A"),ee=n("BNjr"),te=K["a"].Item,ne=[k["a"].ASSET.TITLE,k["a"].ASSET.DEPART_ID,k["a"].ASSET.AREA,k["a"].ASSET.PURCHASE_TYPE,k["a"].ASSET.FIRST_PARTY,k["a"].ASSET.PAY_MODE,k["a"].ASSET.PURCHASE_AMOUNT,k["a"].ASSET.BEGIN_DATE,k["a"].ASSET.END_DATE,k["a"].ASSET.IS_EXAM,k["a"].ASSET.STATUS,k["a"].ASSET.LICENSE_TYPE,k["a"].ASSET.PROVINCE,k["a"].ASSET.CITY,k["a"].ASSET.DISTRICT,k["a"].ASSET.ADDRESS,k["a"].ASSET.LAT,k["a"].ASSET.LNG],re=function(e){var t=e.visible,n=e.setVisible,r=e.data,o=void 0===r?{}:r,a=e.dictionary,i=Object($["a"])(a)(o),l=function(e){return e.key===k["a"].ASSET.PROVINCE.key?Object(ee["a"])("province")(i(e)):e.key===k["a"].ASSET.CITY.key?Object(ee["a"])("city")(i(e)):e.key===k["a"].ASSET.DISTRICT.key?Object(ee["a"])("district")(i(e)):i(e)};return m.a.createElement(w["a"],{title:"\u573a\u5730\u4fe1\u606f",width:"90%",visible:t,destroyOnClose:!0,closable:!0,maskClosable:!1,keyboard:!1,onCancel:function(){return n(!1)},footer:m.a.createElement(p["a"],{icon:"close-circle",htmlType:"button",onClick:function(){return n(!1)}},"\u5173\u95ed")},m.a.createElement(K["a"],{bordered:!0},ne.map(function(e){return m.a.createElement(te,{key:e.key,label:e.title},l(e))}),m.a.createElement(te,{label:"\u573a\u5730\u56fe\u7247",span:3},o.url?m.a.createElement("img",{style:{width:200},src:"http://oss-dev.aplusx.com/".concat(o.url),alt:"\u573a\u5730\u56fe\u7247"}):"\u6682\u65e0"),m.a.createElement(te,{span:3,label:k["a"].ASSET.MEMO.title},i(k["a"].ASSET.MEMO))))},oe=r["a"].create()(re),ae=n("uY7g"),ie="assetSiteList",le=[k["a"].ASSET.DEPART_ID,k["a"].ASSET.PURCHASE_TYPE,k["a"].ASSET.IS_EXAM,k["a"].ASSET.STATUS,k["a"].ASSET.TITLE],ue=function(e){var t=e.form,n=e.dispatch,r=e.loading,o=e.dictionary,a=Object(v["a"])(!1),l=h()(a,2),c=l[0],d=l[1],E=Object(v["a"])(!1),w=h()(E,2),C=w[0],M=w[1],A=Object(y["useState"])({}),T=h()(A,2),O=T[0],P=T[1],I=Object(y["useState"])(void 0),j=h()(I,2),R=j[0],D=j[1],L=Object(v["a"])(!1),x=h()(L,2),N=x[0],U=x[1],W=r.effects["".concat(ie,"/getSiteInfo")]||!1,H=function(e){return function(t){D(e),n({type:"".concat(ie,"/getSiteInfo"),payload:e}).then(function(e){P(e),t&&t()})}},B=[m.a.createElement(ae["a"],{privs:["site_add"],key:"site_add"},m.a.createElement(p["a"],{key:"plus-button",icon:"plus",htmlType:"button",type:"primary",onClick:function(){P({}),d(!0)}},"\u65b0\u589e"))],V=Object(y["useMemo"])(function(){return le.map(function(e){return m.a.createElement(_["a"],{config:e,form:t})})},[t]),Y=[{title:"\u5e8f\u53f7",key:"key"},f()({},k["a"].ASSET.TITLE,{customRender:function(e,t){return m.a.createElement(ae["a"],{privs:["site_detail"],noMatch:e},m.a.createElement("a",{onClick:function(e){e.stopPropagation(),W||H(t.id)(function(){return M(!0)})}},R===t.id&&W&&m.a.createElement(s["a"],{size:"small"})," ",e))}}),k["a"].ASSET.DEPART_ID,k["a"].ASSET.AREA,k["a"].ASSET.PURCHASE_TYPE,k["a"].ASSET.IS_EXAM,k["a"].ASSET.STATUS,{title:"\u64cd\u4f5c",key:"action",customRender:function(e,t){return m.a.createElement(ae["a"],{privs:["site_edit"],noMatch:"\u7f16\u8f91"},m.a.createElement("a",{onClick:function(e){e.stopPropagation(),W||H(t.id)(function(){return d(!0)})}},R===t.id&&W&&m.a.createElement(s["a"],{size:"small"})," \u7f16\u8f91"))}}],Q=r.effects["".concat(ie,"/saveSite")];return m.a.createElement(g["a"],{title:"\u573a\u5730\u7ba1\u7406"},m.a.createElement(i["a"],null,m.a.createElement(b["a"],u()({},e,{needUpdate:N,setNeedUpdate:U,bodyStyle:{padding:0},tableName:ie,tableActions:B,originColumns:Y,scroll:{x:"max-content"},formFields:V})),m.a.createElement(J,{afterClose:function(){return U(!0)},data:O,handleSubmit:function(e){n({type:"".concat(ie,"/saveSite"),payload:f()({},e)}).then(function(e){!1!==e&&(Object(S["e"])(n,"site_id"),d(!1))})},loading:Q,visible:c,setVisible:d}),m.a.createElement(oe,{dictionary:o,data:O,visible:C,setVisible:M})))};t["default"]=Object(E["connect"])(function(e){var t,n=e[ie],r=e.loading,o=e.global,i=e.signUp,l=e.dictionary;return t={},a()(t,ie,n),a()(t,"loading",r),a()(t,"global",o),a()(t,"signUp",i),a()(t,"dictionary",l),t})(r["a"].create()(ue))},YEbH:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n("q1tI"),a=p(o),i=n("i8i4"),l=n("eB3W"),u=p(l),s=n("pLQl"),c=p(s),f=n("2SDg");function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}if("undefined"!==typeof window){var m=".amap_markers_pop_window{\n    padding: 10px;\n    border: 1px solid #ddd;\n    border-radius: 8px;\n    background: #fff;\n    position: relative;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: flex-start;\n}\n.amap_markers_pop_window::before{\n    content: ' ';\n    display: block;\n    position: absolute;\n    bottom: -12px;\n    left: 50%;\n    margin-left: -7px;\n    width: 0;\n    height: 0;\n    border-top: 12px solid #ddd;\n    border-left: 7px solid transparent;\n    border-right: 7px solid transparent;\n}\n.amap_markers_pop_window::after{\n    content: ' ';\n    display: block;\n    position: absolute;\n    bottom: -11px;\n    left: 50%;\n    margin-left: -6px;\n    width: 0;\n    height: 0;\n    border-top: 11px solid #fff;\n    border-left: 6px solid transparent;\n    border-right: 6px solid transparent;\n}\n.amap_markers_pop_window_item{\n    cursor:pointer;\n    width: 40px;\n    height: 50px;\n    display: flex;\n    align-items: flex-end;\n    justify-content: center;\n}\n.amap_markers_pop_window_item span{\n    pointer-events: none;\n}\n.amap_markers_window_overflow_warning{\n    text-align: center;\n    width: 100%;\n    margin: 5px 0;\n    color: #666;\n}",v=document.head||document.getElementsByTagName("head")[0],E=document.createElement("style");E.type="text/css",E.textContent=m,v.appendChild(E)}var b=a.default.Component,k=.8,_=32*k,g=46*k-2,S=46*k,w=66*k-2,C=42,M={useCluster:!1,markersCache:[],markerIDCache:[]},A=["gridSize","minClusterSize","maxZoom","averageCenter","styles","zoomOnClick","renderCluserMarker"],T="__react_amap__",O=function(e){function t(e){d(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return"undefined"!==typeof window&&(e.__map__?(n.map=e.__map__,n.element=n.map.getContainer(),n.markersCache=M.markersCache,n.useCluster=null,n.markerIDCache=M.markerIDCache,n.resetOffset=new window.AMap.Pixel(-_/2,-g),n.hoverOffset=new window.AMap.Pixel(-S/2,-w),n.createMarkers(e)):c.default.warning("MAP_INSTANCE_REQUIRED")),n}return y(t,e),r(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"createMarkers",value:function(e){var t=this,n=e.markers||[],r=[],o={};n.length&&n.forEach(function(n,a){var i=t.buildCreateOptions(e,n,a);i.map=t.map;var l=null;if((0,u.default)(e.render)){var s=e.render(n);if(!1!==s){var c=document.createElement("div");c.setAttribute(T,"1"),l=c,o[a]=s}}if(!l){l=document.createElement("div");var p=document.createElement("img");p.src="//webapi.amap.com/theme/v1.3/markers/n/mark_bs.png",l.appendChild(p)}i.content=l;var d=new window.AMap.Marker(i);d.on("click",function(e){t.onMarkerClick(e)}),d.on("mouseover",function(e){t.onMarkerHover(e)}),d.on("mouseout",function(e){t.onMarkerHoverOut(e)}),d.render=function(e){return function(t){return(0,f.renderMarkerComponent)(t,e)}}(d),t.bindMarkerEvents(d),r.push(d)}),this.markersCache=r,this.markerReactChildDOM=o,this.exposeMarkerInstance(),this.checkClusterSettings(e)}},{key:"checkClusterSettings",value:function(e){var t=this;if(e.useCluster)this.loadClusterPlugin(e.useCluster).then(function(e){e.setMarkers(t.markersCache)});else if(this.mapCluster){var n=this.mapCluster.getMarkers();this.mapCluster.clearMarkers(),n.forEach(function(e){e.setMap(t.map)})}}},{key:"componentDidMount",value:function(){this.map&&this.setMarkerChild()}},{key:"setMarkerChild",value:function(){var e=this;Object.keys(this.markerReactChildDOM).forEach(function(t){var n=e.markersCache[t].getContent(),r=e.markerReactChildDOM[t];e.renderMarkerChild(n,r)})}},{key:"renderMarkerChild",value:function(e,t){(0,i.render)(a.default.createElement("div",null,t),e)}},{key:"buildCreateOptions",value:function(e,t,n){var r={},o=["extData"];return f.MarkerAllProps.forEach(function(a){if(a in t&&-1===o.indexOf(a))r[a]=(0,f.getPropValue)(a,t[a]);else if(a in e)if((0,u.default)(e[a])){var i=e[a].call(null,t,n);r[a]=(0,f.getPropValue)(a,i)}else r[a]=(0,f.getPropValue)(a,e[a])}),r.extData=t,r}},{key:"componentWillReceiveProps",value:function(e){this.map&&this.refreshMarkersLayout(e)}},{key:"refreshMarkersLayout",value:function(e){var t=e.markers!==this.props.markers,n=!!this.props.useCluster!==!!e.useCluster;t&&(this.markersCache.length&&this.markersCache.forEach(function(e){e&&(e.setMap(null),e=null)}),this.markersCache=M.markersCache,this.createMarkers(e),this.setMarkerChild()),(t||n)&&this.markersWindow&&this.markersWindow.close(),n&&this.checkClusterSettings(e)}},{key:"loadClusterPlugin",value:function(e){var t=this;if(this.mapCluster)return Promise.resolve(this.mapCluster);var n="boolean"===typeof e?{}:e;return new Promise(function(e){t.map.plugin(["AMap.MarkerClusterer"],function(){e(t.createClusterPlugin(n))})})}},{key:"createClusterPlugin",value:function(e){var t={},n={minClusterSize:2,zoomOnClick:!1,maxZoom:18,gridSize:60,averageCenter:!0};A.forEach(function(r){t[r]=r in e?e[r]:n[r]}),this.mapCluster=new window.AMap.MarkerClusterer(this.map,[],t);var r={};return"events"in e&&(r=e.events,"created"in r&&r.created(this.mapCluster)),this.initClusterMarkerWindow(),this.bindClusterEvent(r),this.mapCluster}},{key:"onMarkerClick",value:function(e){var t=e.target;this.triggerMarkerClick(e,t)}},{key:"onMarkerHover",value:function(e){e.target.setTop(!0),this.setMarkerHovered(e,e.target)}},{key:"onMarkerHoverOut",value:function(e){e.target.setTop(!1),this.setMarkerHoverOut(e,e.target)}},{key:"onWindowMarkerClick",value:function(e){var t=e.markerRef;this.triggerMarkerClick(null,t)}},{key:"onWindowMarkerHover",value:function(e){var t=e.markerRef;this.setMarkerHovered(null,t)}},{key:"onWindowMarkerHoverOut",value:function(e){var t=e.markerRef;this.setMarkerHoverOut(null,t)}},{key:"setMarkerHovered",value:function(e,t){this.triggerMarkerHover(e,t)}},{key:"setMarkerHoverOut",value:function(e,t){this.triggerMarkerHoverOut(e,t)}},{key:"triggerMarkerClick",value:function(e,t){var n=this.props.events||{};(0,u.default)(n.click)&&n.click(e,t)}},{key:"triggerMarkerHover",value:function(e,t){var n=this.props.events||{};(0,u.default)(n.mouseover)&&n.mouseover(e,t)}},{key:"triggerMarkerHoverOut",value:function(e,t){var n=this.props.events||{};(0,u.default)(n.mouseout)&&n.mouseout(e,t)}},{key:"initClusterMarkerWindow",value:function(){this.markersWindow=new window.AMap.InfoWindow({isCustom:!0,autoMove:!0,closeWhenClickMap:!0,content:"<span>loading...</span>",showShadow:!1,offset:new window.AMap.Pixel(0,-20)}),this.markersDOM=document.createElement("div"),this.markersDOM.className="amap_markers_pop_window",this.markersWindow.setContent(this.markersDOM)}},{key:"bindClusterEvent",value:function(e){var t=this;this.mapCluster.on("click",function(n){if(t.props.useCluster&&t.props.useCluster.zoomOnClick);else{var r=!0;(0,u.default)(e.click)&&(r=e.click(n)),!1!==r&&t.showMarkersInfoWindow(n)}})}},{key:"showMarkersInfoWindow",value:function(e){var t=this,n=e.lnglat,r=e.markers;if(this.markersDOM.innerHTML="",r&&r.length){var o=r.length;if(o>C&&(r=r.slice(0,C)),r.forEach(function(e){var n=e.getContent(),r=document.createElement("div");r.className="window_marker_item",r.appendChild(n),r.markerRef=e,r.addEventListener("click",t.onWindowMarkerClick.bind(t,r),!0),r.addEventListener("mouseover",t.onWindowMarkerHover.bind(t,r),!0),r.addEventListener("mouseout",t.onWindowMarkerHoverOut.bind(t,r),!0),t.markersDOM.appendChild(r)}),o>C){var a=document.createElement("div");a.className="amap_markers_window_overflow_warning",a.innerText="\u66f4\u591a\u5750\u6807\u8bf7\u653e\u5927\u5730\u56fe\u67e5\u770b",this.markersDOM.appendChild(a)}}this.markersWindow.open(this.map,n)}},{key:"exposeMarkerInstance",value:function(){if("events"in this.props){var e=this.props.events||{};(0,u.default)(e.created)&&e.created(this.markersCache)}}},{key:"bindMarkerEvents",value:function(e){var t=this.props.events||{},n=Object.keys(t),r=["click","mouseover","mouseout","created"];n.length&&n.forEach(function(n){-1===r.indexOf(n)&&e.on(n,t[n])})}},{key:"render",value:function(){return null}}]),t}(b);t.default=O},ZCYf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n("q1tI"),a=c(o),i=n("79gr"),l=c(i),u=n("pLQl"),s=c(u);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(e){f(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if("undefined"!==typeof window)if(e.__map__&&e.__poly__){var r=n;n.setterMap={active:function(e){r.toggleActive(e)}},n.map=e.__map__,n.poly=e.__poly__,n.editorActive=!1,n.createEditorInstance().then(function(){n.props.onInstanceCreated&&n.props.onInstanceCreated()})}else s.default.warning("MAP_INSTANCE_REQUIRED");return n}return d(t,e),r(t,[{key:"toggleActive",value:function(e){e?this.editorActive||this.activeEditor():this.editorActive&&this.inactiveEditor()}},{key:"activeEditor",value:function(){this.polyEditor&&(this.editorActive=!0,this.polyEditor.open())}},{key:"inactiveEditor",value:function(){this.editorActive=!1,this.polyEditor&&this.polyEditor.close()}},{key:"createEditorInstance",value:function(){var e=this;return this.polyEditor?Promise.resolve(this.polyEditor):new Promise(function(t){e.map.plugin(["AMap.PolyEditor"],function(){e.polyEditor=new window.AMap.PolyEditor(e.map,e.poly),t(e.polyEditor)})})}},{key:"render",value:function(){return null}},{key:"instance",get:function(){return this.polyEditor}}]),t}(a.default.Component);t.default=(0,l.default)(h)},eB3W:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return!!e&&"function"===typeof e};t.default=r},fqIc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n("q1tI"),a=c(o),i=n("pLQl"),l=c(i),u=n("eB3W"),s=c(u);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(e){f(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return"undefined"!==typeof window&&(e.__map__&&e.__circle__?(n.map=e.__map__,n.element=n.map.getContainer(),n.circle=e.__circle__,n.editorActive=!1,n.onPropsUpdate(e)):l.default.warning("CIRCLE_INSTANCE_REQUIRED")),n}return d(t,e),r(t,[{key:"componentWillReceiveProps",value:function(e){this.map&&this.onPropsUpdate(e)}},{key:"onPropsUpdate",value:function(e){"active"in e&&!1===e.active?this.toggleActive(!1,e):this.toggleActive(!0,e)}},{key:"toggleActive",value:function(e,t){e?this.editorActive||this.activeEditor(t):this.editorActive&&this.inactiveEditor()}},{key:"activeEditor",value:function(e){var t=this;this.loadCircleEditor(e).then(function(e){t.editorActive=!0,e.open()})}},{key:"inactiveEditor",value:function(){this.editorActive=!1,this.circleEditor&&this.circleEditor.close()}},{key:"loadCircleEditor",value:function(e){var t=this;return this.circleEditor?Promise.resolve(this.circleEditor):new Promise(function(n){t.map.plugin(["AMap.CircleEditor"],function(){n(t.createEditorInstance(e))})})}},{key:"createEditorInstance",value:function(e){this.circleEditor=new window.AMap.CircleEditor(this.map,this.circle);var t=this.exposeEditorInstance(e);return t&&this.bindEditorEvents(t),this.circleEditor}},{key:"exposeEditorInstance",value:function(e){if("events"in e){var t=e.events||{};return(0,s.default)(t.created)&&t.created(this.circleEditor),delete t.created,t}return!1}},{key:"bindEditorEvents",value:function(e){var t=this,n=Object.keys(e);n.length&&n.forEach(function(n){t.circleEditor.on(n,e[n])})}},{key:"render",value:function(){return null}}]),t}(a.default.Component);t.default=h},g4Dz:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n("q1tI"),a=f(o),i=n("79gr"),l=f(i),u=n("pLQl"),s=f(u),c=n("7LDH");function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=["center","radius","draggable","extData","visible","style"],m=y.concat(["zIndex","bubble"]),v=function(e){function t(e){p(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if("undefined"!==typeof window)if(e.__map__){var r=n;n.setterMap={visible:function(e){r.mapCircle&&(e?r.mapCircle.show():r.mapCircle.hide())},style:function(e){r.mapCircle&&r.mapCircle.setOptions(e)}},n.converterMap={center:c.toLnglat},n.state={loaded:!1},n.map=e.__map__,n.element=n.map.getContainer(),n.createInstance(e).then(function(){n.setState({loaded:!0}),n.props.onInstanceCreated&&n.props.onInstanceCreated()})}else s.default.warning("MAP_INSTANCE_REQUIRED");return n}return h(t,e),r(t,[{key:"createInstance",value:function(e){var t=this.buildCreateOptions(e);return t.map=this.map,this.mapCircle=new window.AMap.Circle(t),Promise.resolve(this.mapCircle)}},{key:"buildCreateOptions",value:function(e){var t=this,n={};return m.forEach(function(r){if(r in e)if("style"===r&&void 0!==e.style){var o=Object.keys(e.style);o.forEach(function(t){n[t]=e.style[t]})}else n[r]=t.getSetterValue(r,e)}),n}},{key:"getSetterValue",value:function(e,t){return e in this.converterMap?this.converterMap[e](t[e]):t[e]}},{key:"renderEditor",value:function(e){return e?1!==a.default.Children.count(e)?null:a.default.cloneElement(a.default.Children.only(e),{__circle__:this.mapCircle,__map__:this.map,__ele__:this.element}):null}},{key:"render",value:function(){return this.state.loaded?this.renderEditor(this.props.children):null}},{key:"instance",get:function(){return this.mapCircle}}]),t}(a.default.Component);t.default=(0,l.default)(v)},mHyM:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n("q1tI"),a=d(o),i=n("79gr"),l=d(i),u=n("pLQl"),s=d(u),c=n("ZCYf"),f=d(c),p=n("7LDH");function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=["path","draggable","extData","style","visible"],E=v.concat(["zIndex","bubble"]),b=function(e){function t(e){h(this,t);var n=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if("undefined"!==typeof window)if(e.__map__){var r=n;n.setterMap={visible:function(e){e?r.polygon&&r.polygon.show():r.polygon&&r.polygon.hide()},style:function(e){r.polygon.setOptions(e)}},n.converterMap={path:function(e){return r.buildPathValue(e)}},n.state={loaded:!1},n.map=e.__map__,n.element=n.map.getContainer(),setTimeout(function(){n.initMapPolygon(e)},13)}else s.default.warning("MAP_INSTANCE_REQUIRED");return n}return m(t,e),r(t,[{key:"initMapPolygon",value:function(e){var t=this.buildCreateOptions(e);t.map=this.map,this.polygon=new window.AMap.Polygon(t),this.setState({loaded:!0}),this.props.onInstanceCreated&&this.props.onInstanceCreated()}},{key:"buildCreateOptions",value:function(e){var t=this,n={};return E.forEach(function(r){if(r in e)if("style"===r&&e.style){var o=Object.keys(e.style);o.forEach(function(t){n[t]=e.style[t]})}else"visible"!==r&&(n[r]=t.getSetterValue(r,e[r]))}),n}},{key:"detectPropChanged",value:function(e,t){return this.props[e]!==t[e]}},{key:"getSetterValue",value:function(e,t){return e in this.converterMap?this.converterMap[e](t):t}},{key:"buildPathValue",value:function(e){var t=this;if(e.length){var n=e[0];if("number"===typeof n[0])return e.map(function(e){return(0,p.toLnglat)(e)});if("getLng"in n)return e;if("longitude"in n||"lng"in n)return e.map(function(e){return(0,p.toLnglat)(e)});if("length"in n&&n.length)return e.map(function(e){return t.buildPathValue(e)})}return[]}},{key:"renderEditor",value:function(e){if(!e)return null;if(1!==a.default.Children.count(e))return null;var t=a.default.Children.only(e);return t.type===f.default?a.default.cloneElement(t,{__poly__:this.polygon,__map__:this.map}):null}},{key:"render",value:function(){return this.state.loaded?this.renderEditor(this.props.children):null}},{key:"instance",get:function(){return this.polygon}}]),t}(o.Component);t.default=(0,l.default)(b)},ooyC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n("q1tI"),a=p(o),i=n("i8i4"),l=n("79gr"),u=p(l),s=n("pLQl"),c=p(s),f=n("7LDH");function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=a.default.Component,v=["content","position","size","visible","offset"],E=v.concat(["isCustom","autoMove","closeWhenClickMap","showShadow"]),b=function(e){function t(e){d(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if("undefined"!==typeof window)if(e.__map__){var r=n;n.setterMap={visible:function(e){e?(r.showWindow(),r.setClassName(r.props),r.setChild(r.props)):r.closeWindow()}},n.converterMap={size:f.toSize,offset:f.toPixel,position:f.toLnglat},n.map=e.__map__,n.isCustom=!0,setTimeout(function(){n.createInfoWindow(e)},13)}else c.default.warning("MAP_INSTANCE_REQUIRED");return n}return y(t,e),r(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentWillReceiveProps",value:function(e){this.map&&this.refreshWindowLayout(e)}},{key:"createInfoWindow",value:function(e){var t=this.buildCreateOptions(e);this.infoWindow=new window.AMap.InfoWindow(t),this.props.onInstanceCreated&&this.props.onInstanceCreated()}},{key:"refreshWindowLayout",value:function(e){this.setChild(e),this.setClassName(e)}},{key:"checkPropChanged",value:function(e,t){return this.props[e]!==t[e]}},{key:"showWindow",value:function(){this.infoWindow.open(this.map,this.infoWindow.getPosition())}},{key:"closeWindow",value:function(){this.infoWindow.close()}},{key:"buildCreateOptions",value:function(e){var t=this,n={};return n.isCustom="isCustom"in e&&!!e.isCustom,"content"in e?n.content=e.content:(this.infoDOM=document.createElement("div"),n.content=this.infoDOM),E.forEach(function(r){r in e&&-1===["visible","isCustom","content"].indexOf(r)&&(n[r]=t.getSetterValue(r,e[r]))}),n}},{key:"getSetterValue",value:function(e,t){return e in this.converterMap?this.converterMap[e](t):t}},{key:"setChild",value:function(e){var t=e.children;this.infoDOM&&t?(0,i.render)(a.default.createElement("div",null,t),this.infoDOM):e.children&&console.warn("\u56e0\u4e3a\u4f60\u8bbe\u7f6e isCustom \u4e3a true\uff0cInfoWindow \u7684 Children \u88ab\u5ffd\u7565")}},{key:"setClassName",value:function(e){if(this.infoDOM){var t="";"className"in e&&e.className?t+=e.className:!0===e.isCustom&&(t+="amap_markers_pop_window"),this.infoDOM.className=t}}},{key:"render",value:function(){return null}},{key:"instance",get:function(){return this.infoWindow}}]),t}(m);t.default=(0,u.default)(b)},pLQl:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={MARKER_ID_CONFLICT:"Marker \u7684 id \u5c5e\u6027\u91cd\u590d",MARKER_ID_REQUIRED:"\u6bcf\u4e00\u4e2a Marker \u5fc5\u9700\u6709\u4e00\u4e2a id \u5c5e\u6027",MAP_INSTANCE_REQUIRED:"\u6ca1\u6709\u5730\u56fe\u5b9e\u4f8b\uff1b\u7ec4\u4ef6\u5fc5\u987b\u4f5c\u4e3a Map \u7684\u5b50\u7ec4\u4ef6\u4f7f\u7528",CIRCLE_INSTANCE_REQUIRED:"",CIRCLE_CENTER_REQUIRED:"Circle \u7ec4\u4ef6\u5fc5\u9700\u8bbe\u7f6e center \u5c5e\u6027",CIRCLE_RADIUS_REQUIRED:"Circle \u7ec4\u4ef6\u5fc5\u9700\u8bbe\u7f6e radius \u5c5e\u6027",SRC_REQUIRED:"GroundImage \u7ec4\u4ef6\u5fc5\u9700\u8bbe\u7f6e src \u5c5e\u6027",BOUNDS_REQUIRED:"GroundImage \u7ec4\u4ef6\u5fc5\u9700\u8bbe\u7f6e bounds \u5c5e\u6027",WINDOW_POSITION_REQUIRED:"InfoWindow \u7ec4\u4ef6\u5fc5\u9700\u8bbe\u7f6e position \u5c5e\u6027",INVALID_AMAP_PLUGIN:"plugins \u5c5e\u6027\u4e0d\u6b63\u786e\uff1b\u76ee\u524d\u652f\u6301\u7684\u63d2\u4ef6\u6709'Scale', 'ToolBar', 'MapType', 'OverView'"},o=function(e){return e in r?r[e]:e},a={error:function(e){throw new Error(o(e))},warning:function(e){console.warn(o(e))},optimize:function(e){console.log("%c"+o(e),"color:#d4d483;border-left: 2px solid #d4d483;padding-left: 4px;")}};t.default=a},"rk/D":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e[0].toUpperCase()+e.slice(1,e.length)};t.default=r},"sC/+":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n("q1tI"),a=d(o),i=n("79gr"),l=d(i),u=n("pLQl"),s=d(u),c=n("ZCYf"),f=d(c),p=n("7LDH");function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=a.default.Component,E=["path","extData","draggable","visible","style"],b=E.concat(["zIndex","bubble","showDir"]),k=function(e){function t(e){h(this,t);var n=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if("undefined"!==typeof window)if(e.__map__){var r=n;n.setterMap={visible:function(e){e?r.polyline&&r.polyline.show():r.polyline&&r.polyline.hide()},style:function(e){r.polyline.setOptions(e)}},n.converterMap={path:function(e){return r.buildPathValue(e)}},n.state={loaded:!1},n.map=e.__map__,n.element=n.map.getContainer(),setTimeout(function(){n.createMapPolyline(e)},13)}else s.default.warning("MAP_INSTANCE_REQUIRED");return n}return m(t,e),r(t,[{key:"createMapPolyline",value:function(e){var t=this.buildCreateOptions(e);t.map=this.map,this.polyline=new window.AMap.Polyline(t),this.setState({loaded:!0}),this.props.onInstanceCreated&&this.props.onInstanceCreated()}},{key:"buildCreateOptions",value:function(e){var t=this,n={};return b.forEach(function(r){if(r in e)if("style"===r&&e.style){var o=Object.keys(e.style);o.forEach(function(t){n[t]=e.style[t]})}else"visible"!==r&&(n[r]=t.getSetterValue(r,e[r]))}),n}},{key:"detectPropChanged",value:function(e,t){return this.props[e]!==t[e]}},{key:"getSetterValue",value:function(e,t){return e in this.converterMap?this.converterMap[e](t):t}},{key:"buildPathValue",value:function(e){return e.length?"getLng"in e[0]?e:e.map(function(e){return(0,p.toLnglat)(e)}):e}},{key:"renderEditor",value:function(e){if(!e)return null;if(1!==a.default.Children.count(e))return null;var t=a.default.Children.only(e);return t.type===f.default?a.default.cloneElement(t,{__poly__:this.polyline,__map__:this.map}):null}},{key:"render",value:function(){return this.state.loaded?this.renderEditor(this.props.children):null}},{key:"instance",get:function(){return this.polyline}}]),t}(v);t.default=(0,l.default)(k)}}]);