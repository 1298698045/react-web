(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[148],{"4tx+":function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),i=n.n(a),c=n("zHco"),o=n("Y2fQ"),l=n("usdK"),r=function(e){var t=e.match,n=e.children,a=e.location,r=(e.dispatch,[{priv:"coach_list",key:"list",tab:"\u6559\u7ec3\u5217\u8868"},{priv:"student_info",key:"student",tab:"\u5b66\u5458\u60c5\u51b5"}]),E=function(e){l["a"].push("".concat(t.url,"/").concat(e))};return i.a.createElement(c["a"],{title:i.a.createElement(o["FormattedMessage"],{id:"menu.teaching.coach"}),tabList:r,tabActiveKey:a.pathname.replace("".concat(t.path,"/"),""),onTabChange:E},n)};t["default"]=r},HdvW:function(e,t,n){"use strict";n.r(t);n("y8nQ");var a=n("Vl3Y"),i=n("eHn4"),c=n.n(i),o=(n("IzEo"),n("bx4M")),l=(n("g9YV"),n("wCAj")),r=n("jehZ"),E=n.n(r),u=n("p0pE"),m=n.n(u),s=n("qIgq"),d=n.n(s),f=n("q1tI"),C=n.n(f),O=n("MuoO"),k=n("v99g"),I=n("myFP"),T=n("mGJS"),b=n("9vKQ"),v=(n("2qtc"),n("kLXV")),_=(n("uY7g"),"studentList"),g=function(e){e.dispatch;var t=e.visible,n=e.setVisible,a=e.form,i=(e.loading,e.searchParams),c=e.coachName,o=function(e){e.preventDefault(),n(!1)},l=[{key:"key",title:"\u5e8f\u53f7"},b["a"].STUDENT.NAME,b["a"].STUDENT.MOBILE,b["a"].STUDENT.KM1_STATUS,b["a"].STUDENT.KM2_STATUS,b["a"].STUDENT.KM3_STATUS,b["a"].STUDENT.KM4_STATUS,b["a"].STUDENT.COACH_ID,b["a"].STUDENT.CLASS_ID,b["a"].STUDENT.STUDENT_TYPE],r=[{config:b["a"].STUDENT.CLASS_ID_ACTIVE},{config:b["a"].STUDENT.STUDENT_TYPE},{config:b["a"].STUDENT.ACTIVE_DAYS,initialValue:i[b["a"].STUDENT.ACTIVE_DAYS.key]||30}],u=Object(f["useMemo"])(function(){return r.map(function(e){return C.a.createElement(T["a"],E()({},e,{initialValue:e.initialValue,form:a}))})},[a]);return C.a.createElement(v["a"],{destroyOnClose:!0,title:"".concat({km2:"\u79d1\u76ee\u4e8c",km3:"\u79d1\u76ee\u4e09"}[i.kmCode]||"","\u603b").concat(i.isActivity?"\u6f5c\u6c34":"\u6d3b\u8dc3","\u5b66\u5458").concat(c?" -\u3010"+c+"\u3011":""),width:"90%",visible:t,footer:null,onCancel:o,closable:!0,maskClosable:!0,keyboard:!1,bodyStyle:{padding:0}},C.a.createElement(k["a"],null,C.a.createElement(I["a"],E()({},e,{tableName:_,originColumns:l,formFields:u,tableSearchParams:i,columnSortable:!1,scroll:{x:"max-content"}}))))},y=Object(O["connect"])(function(e){var t,n=e[_],a=e.loading,i=e.global;return t={},c()(t,_,n),c()(t,"loading",a),c()(t,"global",i),t})(a["a"].create()(g)),A="coachStudent",p=function(e){var t=e.dispatch,n=e.form,a=e[A],i=Object(f["useState"])(!1),c=d()(i,2),r=c[0],u=c[1],s=Object(f["useState"])({}),O=d()(s,2),v=O[0],_=O[1],g=Object(f["useState"])(null),p=d()(g,2),S=p[0],N=p[1],M=function(e){e.link&&t({type:"quickEntryParams/linkTo",payload:{url:e.link,params:e.params}})},h=function(e,t,n,a){_({isActivity:e,kmCode:t,coachId:n}),N(a),u(!0)},P=[b["a"].EMPLOYEE.NAME,b["a"].EMPLOYEE.MOBILE,b["a"].EMPLOYEE.DEPART_ID,b["a"].EMPLOYEE.COACH_INFO.SITE_ID,m()({},b["a"].EMPLOYEE.COACH_INFO.STUDENT_TOTAL,{customRender:function(e,t){return 1*e!==0?C.a.createElement("a",{onClick:function(){return M({link:"/student/student-list/local",params:{coachId:t.employeeId,tabKey:"0"}})}},e):0}}),m()({},b["a"].EMPLOYEE.COACH_INFO.STUDENT_KM,{customRender:function(e,t){var n=t[b["a"].EMPLOYEE.COACH_INFO.STUDENT_KM2.key],a=t[b["a"].EMPLOYEE.COACH_INFO.STUDENT_KM3.key];return C.a.createElement(f["Fragment"],null,C.a.createElement("div",null,"\u79d1\u76ee\u4e8c\uff1a",1*e!==0?C.a.createElement("a",{onClick:function(){return M({link:"/student/student-list/local",params:{coachId:t.employeeId,tabKey:"0"}})}},n):0),C.a.createElement("div",null,"\u79d1\u76ee\u4e09\uff1a",1*e!==0?C.a.createElement("a",{onClick:function(){return M({link:"/student/student-list/local",params:{coachId:t.employeeId,tabKey:"0"}})}},a):0))}}),m()({},b["a"].EMPLOYEE.COACH_INFO.STUDENT_KM2_ACTIVE,{title:"\u6d3b\u8dc3\u5b66\u5458",customRender:function(e,t){var n=t[b["a"].EMPLOYEE.COACH_INFO.STUDENT_KM2_ACTIVE.key],a=t[b["a"].EMPLOYEE.COACH_INFO.STUDENT_KM3_ACTIVE.key];return C.a.createElement(f["Fragment"],null,C.a.createElement("div",null,"\u79d1\u76ee\u4e8c\uff1a",C.a.createElement("a",{onClick:function(){return h(0,"km2",t.employeeId,t.name)}},n)),C.a.createElement("div",null,"\u79d1\u76ee\u4e09\uff1a",C.a.createElement("a",{onClick:function(){return h(0,"km3",t.employeeId,t.name)}},a)))}}),m()({},b["a"].EMPLOYEE.COACH_INFO.STUDENT_KM2_UNACTIVE,{title:"\u6f5c\u6c34\u5b66\u5458",customRender:function(e,t){return C.a.createElement(f["Fragment"],null,C.a.createElement("div",null,"\u79d1\u76ee\u4e8c\uff1a",C.a.createElement("a",{onClick:function(){return h(1,"km2",t.employeeId,t.name)}},t.km2InActiveCount)),C.a.createElement("div",null,"\u79d1\u76ee\u4e09\uff1a",C.a.createElement("a",{onClick:function(){return h(1,"km3",t.employeeId,t.name)}},t.km3InActiveCount)))}}),m()({},b["a"].EMPLOYEE.COACH_INFO.STUDENT_GRADUATED,{customRender:function(e,t){return 1*e!==0?C.a.createElement("a",{onClick:function(){return M({link:"/student/student-list/local",params:{employeeId:t.employeeId,tabKey:"2"}})}},e):0}})],L=[{config:m()({},b["a"].EMPLOYEE.QUICK_SEARCH,{title:"\u6559\u7ec3"})},{config:b["a"].EMPLOYEE.COACH_INFO.TEACH_LICENSE_TYPE},{config:b["a"].EMPLOYEE.DEPART_ID},{config:b["a"].EMPLOYEE.COACH_INFO.SITE_ID},{config:b["a"].EMPLOYEE.LEAVING},{config:b["a"].EMPLOYEE.COACH_INFO.STUDENT_ACTIVE_DAYS,initialValue:30}],D=Object(f["useMemo"])(function(){return L.map(function(e){return C.a.createElement(T["a"],E()({},e,{initialValue:e.initialValue,form:n}))})},[n]),Y=[{title:"\u603b\u5b66\u5458\u6570",dataIndex:"total",key:"total"},{title:"\u603b\u6d3b\u8dc3\u5b66\u5458\u6570",dataIndex:"activeCount",key:"activeCount"},{title:"\u603b\u6f5c\u6c34\u5b66\u5458\u6570",dataIndex:"unactiveCount",key:"unactiveCount"},{title:"\u79d1\u76ee\u4e8c\u603b\u5b66\u5458\u6570",dataIndex:"km2",key:"km2"},{title:"\u79d1\u76ee\u4e8c\u6d3b\u8dc3\u6570",dataIndex:"km2Active",key:"km2Active"},{title:"\u79d1\u76ee\u4e8c\u6f5c\u6c34\u6570",dataIndex:"km2Unactive",key:"km2Unactive"},{title:"\u79d1\u76ee\u4e8c\u672a\u5206\u914d\u6559\u7ec3\u6570",dataIndex:"unassignedKm2",key:"unassignedKm2"},{title:"\u79d1\u76ee\u4e09\u603b\u6570",dataIndex:"km3",key:"km3"},{title:"\u79d1\u76ee\u4e09\u6d3b\u8dc3\u6570",dataIndex:"km3Active",key:"km3Active"},{title:"\u79d1\u76ee\u4e09\u6f5c\u6c34\u6570",dataIndex:"km3Unactive",key:"km3Unactive"},{title:"\u79d1\u76ee\u4e09\u672a\u5206\u914d\u6559\u7ec3\u6570",dataIndex:"unassignedKm3",key:"unassignedKm3"}],U=Object(f["useMemo"])(function(){var e=a.total||{},t=e.total,n=void 0===t?0:t,i=e.activeCount,c=void 0===i?0:i,o=e.km2,l=void 0===o?0:o,r=e.km2Active,E=void 0===r?0:r,u=e.km3,m=void 0===u?0:u,s=e.km3Active,d=void 0===s?0:s,f=e.unassignedKm2,O=void 0===f?0:f,k=e.unassignedKm3,I=void 0===k?0:k,T=e.inActiveCount,b=void 0===T?0:T,v=e.km2InActive,_=void 0===v?0:v,g=e.km3InActive,y=void 0===g?0:g;return[{key:"1",total:n,activeCount:C.a.createElement("a",{onClick:function(){return h(0)}},c),unactiveCount:C.a.createElement("a",{onClick:function(){return h(1)}},b),km2:l,km2Active:C.a.createElement("a",{onClick:function(){return h(0,"km2")}},E),km2Unactive:C.a.createElement("a",{onClick:function(){return h(1,"km2")}},_),unassignedKm2:O,km3:m,km3Active:C.a.createElement("a",{onClick:function(){return h(0,"km3")}},d),km3Unactive:C.a.createElement("a",{onClick:function(){return h(1,"km3")}},y),unassignedKm3:I}]},[a]);return C.a.createElement(f["Fragment"],null,C.a.createElement(k["a"],null,C.a.createElement(o["a"],{bordered:!1,style:{marginBottom:20}},C.a.createElement(l["a"],{key:"total",pagination:!1,columns:Y,dataSource:U})),C.a.createElement(I["a"],E()({},e,{tableName:A,originColumns:P,formFields:D,columnSortable:!1}))),C.a.createElement(y,{searchParams:v,coachName:S,visible:r,setVisible:u}))};t["default"]=Object(O["connect"])(function(e){var t,n=e[A],a=e.loading,i=e.global,o=e.quickEntryParams;return t={},c()(t,A,n),c()(t,"loading",a),c()(t,"global",i),c()(t,"quickEntryParams",o),t})(a["a"].create()(p))},qoVb:function(e,t,n){"use strict";n.r(t);n("y8nQ");var a=n("Vl3Y"),i=n("eHn4"),c=n.n(i),o=n("jehZ"),l=n.n(o),r=(n("+L6B"),n("2/Rp")),E=(n("+BJd"),n("mr32")),u=n("p0pE"),m=n.n(u),s=n("qIgq"),d=n.n(s),f=n("q1tI"),C=n.n(f),O=n("MuoO"),k=n("v99g"),I=n("myFP"),T=n("mGJS"),b=n("9vKQ"),v=n("o8it"),_=n("03Mi"),g=n("uY7g"),y=(n("2qtc"),n("kLXV")),A=(n("14J3"),n("BMrR")),p=(n("jCWc"),n("kPKH")),S=function(e){var t=e.selectedRows,n=e.onSubmit,i=e.visible,c=e.setVisible,o=e.form,r=e.loading,E=function(e){e.preventDefault(),o.validateFields(function(e,a){if(e)return!1;n({bookNum:a.bookNum.join(","),employeeIds:t.map(function(e){return e.employeeId})})})},u=function(e){e.preventDefault(),c(!1)};return C.a.createElement(y["a"],{destroyOnClose:!0,title:"\u6279\u91cf\u66f4\u6539\u5b66\u5458\u4e0a\u9650",width:350,visible:i,onOk:E,onCancel:u,closable:!0,maskClosable:!1,keyboard:!1,confirmLoading:r,okText:"\u63d0\u4ea4",cancelText:"\u53d6\u6d88"},C.a.createElement(a["a"],{onSubmit:E},C.a.createElement(A["a"],{gutter:24},C.a.createElement(p["a"],null,C.a.createElement(T["a"],l()({className:"customer-checkbox"},e,{config:m()({},b["a"].EMPLOYEE.COACH_INFO.BOOK_NUM,{title:"\u5b66\u5458\u4e0a\u9650\u4eba/\u8f66"}),form:o,rules:[{required:!0,message:"\u8be5\u9879\u4e3a\u5fc5\u586b"}],style:{marginBottom:0}}))))))},N=a["a"].create()(S),M=function(e){var t=e.selectedRows,n=e.onSubmit,i=e.visible,c=e.setVisible,o=e.form,r=e.loading,E=function(e){e.preventDefault(),o.validateFields(function(e,a){if(e)return!1;n(m()({},a,{employeeIds:t.map(function(e){return e.employeeId})}))})},u=function(e){e.preventDefault(),c(!1)};return C.a.createElement(y["a"],{destroyOnClose:!0,title:"\u6279\u91cf\u66f4\u6539\u6559\u5b66\u65f6\u6bb5",width:350,visible:i,onOk:E,onCancel:u,closable:!0,maskClosable:!1,keyboard:!1,confirmLoading:r,okText:"\u63d0\u4ea4",cancelText:"\u53d6\u6d88"},C.a.createElement(a["a"],{onSubmit:E},C.a.createElement(A["a"],{gutter:24},C.a.createElement(T["a"],l()({},e,{config:b["a"].EMPLOYEE.COACH_INFO.LESSON_ID_ACTIVE,form:o,rules:[{required:!0,message:"\u8be5\u9879\u4e3a\u5fc5\u586b"}],style:{marginBottom:0}})))))},h=a["a"].create()(M),P="coach",L=function(e){var t=e.dispatch,n=e.form,a=e.loading,i=(e.coach,Object(f["useState"])(!1)),c=d()(i,2),o=c[0],u=c[1],s=Object(f["useState"])({}),O=d()(s,2),y=O[0],A=O[1],p=Object(f["useState"])(!1),S=d()(p,2),M=S[0],L=S[1],D=Object(f["useState"])([]),Y=d()(D,2),U=Y[0],F=Y[1],H=Object(f["useState"])(!1),K=d()(H,2),V=K[0],R=K[1],j=Object(f["useState"])(!1),x=d()(j,2),w=x[0],q=x[1],B=function(e){return t({type:"orgEmployee/saveEmployeeEdit",params:e}).then(function(){L(!0),Object(_["e"])(t,"employee_id")})},Q=function(e){return t({type:P+"/changePlan",params:{params:e}}).then(function(){L(!0)})},G=function(e){return t({type:P+"/changeBookNum",params:{params:e}}).then(function(){L(!0)})},J=[{key:"key",title:"\u5e8f\u53f7"},m()({},b["a"].EMPLOYEE.NAME,{customRender:function(e,t,n){return C.a.createElement(g["a"],{privs:["coach_edit"],noMatch:e},C.a.createElement("a",{onClick:function(e){A(m()({},t)),u(!0)}},e))}}),b["a"].EMPLOYEE.MOBILE,b["a"].EMPLOYEE.DEPART_ID,b["a"].EMPLOYEE.COACH_INFO.SITE_ID,b["a"].EMPLOYEE.COACH_INFO.TEACH_KM,b["a"].EMPLOYEE.COACH_INFO.TEACH_LICENSE_TYPE,b["a"].EMPLOYEE.COACH_INFO.BOOK_NUM,m()({},b["a"].EMPLOYEE.COACH_INFO.CARS,{customRender:function(e,t,n,a){return a?a.split(",").map(function(e){return C.a.createElement(E["a"],{key:e},e)}):a}}),b["a"].EMPLOYEE.COACH_INFO.COURSE_ARRANGE],z=[{config:m()({},b["a"].EMPLOYEE.QUICK_SEARCH,{title:"\u6559\u7ec3"})},{config:b["a"].EMPLOYEE.COACH_INFO.TEACH_LICENSE_TYPE},{config:b["a"].EMPLOYEE.DEPART_ID},{config:b["a"].EMPLOYEE.COACH_INFO.SITE_ID},{config:m()({},b["a"].EMPLOYEE.COACH_INFO.TEACH_KM,{type:"select"})},{config:b["a"].EMPLOYEE.LEAVING}],W=[C.a.createElement(g["a"],{privs:["change_time_batch"],key:"change_time_batch"},C.a.createElement(r["a"],{key:"stime",disabled:!U.length,htmlType:"button",type:"primary",onClick:function(){R(!0)}},"\u6279\u91cf\u66f4\u6539\u6559\u5b66\u65f6\u6bb5"),","),C.a.createElement(g["a"],{privs:["change_book_num_batch"],key:"change_book_num_batch"},C.a.createElement(r["a"],{key:"slimit",disabled:!U.length,htmlType:"button",type:"primary",onClick:function(){q(!0)}},"\u6279\u91cf\u66f4\u6539\u5b66\u5458\u4e0a\u9650"))],X=Object(f["useMemo"])(function(){return z.map(function(e){return C.a.createElement(T["a"],l()({},e,{form:n}))})},[n]);return C.a.createElement(f["Fragment"],null,C.a.createElement(k["a"],null,C.a.createElement(I["a"],l()({},e,{tableName:P,originColumns:J,formFields:X,tableSearchParams:{leaving:0},tableActions:W,columnSortable:!1,scroll:{x:"max-content"},needUpdate:M,setNeedUpdate:L,selectedRows:U,setSelectedRows:F}))),C.a.createElement(v["a"],{employeeId:y.employeeId,visible:o,setVisible:u,confirmLoading:a.effects["orgEmployee/saveEmployeeEdit"],onSubmit:function(e){console.log(e),B(e).then(function(e){!1!==e&&u(!1)})}}),C.a.createElement(h,{selectedRows:U,visible:V,setVisible:R,loading:a.effects[P+"/changePlan"],onSubmit:function(e){Q(e).then(function(e){!1!==e&&R(!1)})}}),C.a.createElement(N,{selectedRows:U,visible:w,setVisible:q,loading:a.effects[P+"/changeBookNum"],onSubmit:function(e){G(e).then(function(e){!1!==e&&q(!1)})}}))};t["default"]=Object(O["connect"])(function(e){var t,n=e[P],a=e.loading,i=e.global;return t={},c()(t,P,n),c()(t,"loading",a),c()(t,"global",i),t})(a["a"].create()(L))}}]);