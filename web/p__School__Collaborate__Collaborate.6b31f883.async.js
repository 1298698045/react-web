(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[85],{tcHi:function(e,a,t){"use strict";t.r(a);t("y8nQ");var n=t("Vl3Y"),o=t("eHn4"),O=t.n(o),c=t("jehZ"),i=t.n(c),r=(t("+L6B"),t("2/Rp")),l=t("gWZ8"),C=t.n(l),L=t("p0pE"),u=t.n(L),A=t("qIgq"),_=t.n(A),s=t("q1tI"),R=t.n(s),E=t("MuoO"),m=t("zHco"),d=t("Y2fQ"),f=t("v99g"),G=t("myFP"),T=t("mGJS"),b=t("9vKQ"),k=(t("2qtc"),t("kLXV")),y=(t("14J3"),t("BMrR")),p=(t("jCWc"),t("kPKH")),D=t("Djev"),g=function(e){var a=e.selectedRow,t=e.onSubmit,o=e.visible,c=e.setVisible,r=e.form,l=e.loading,C=Object(D["a"])(a),L=function(e){e.preventDefault(),r.validateFields(function(e,n){var o;if(e)return!1;var c=n[b["a"].ORG.COLLA_LOCATION.key];delete n[b["a"].ORG.COLLA_LOCATION.key],t(u()({},n,(o={},O()(o,b["a"].ORG.COLLA_TYPE.key,n[b["a"].ORG.COLLA_TYPE.key].join(",")),O()(o,b["a"].ORG.COLLA_ID.key,a[b["a"].ORG.COLLA_ID.key]),O()(o,b["a"].ORG.COLLA_PROVINCE_CODE.key,c[0]),O()(o,b["a"].ORG.COLLA_CITY_CODE.key,c[1]),O()(o,b["a"].ORG.COLLA_DISTRICT_CODE.key,c[2]),o)))})},A=function(e){e.preventDefault(),c(!1)};return R.a.createElement(k["a"],{destroyOnClose:!0,title:(a[b["a"].ORG.COLLA_ID.key]?"\u4fee\u6539":"\u65b0\u589e")+"\u5916\u534f\u673a\u6784",width:700,visible:o,onOk:L,onCancel:A,closable:!0,maskClosable:!1,keyboard:!1,confirmLoading:l,okText:"\u63d0\u4ea4",cancelText:"\u53d6\u6d88"},R.a.createElement(n["a"],{onSubmit:L},R.a.createElement(y["a"],{gutter:24},[b["a"].ORG.COLLA_NAME,b["a"].ORG.COLLA_TYPE,u()({},b["a"].ORG.COLLA_LOCATION,{value:[C(b["a"].ORG.COLLA_PROVINCE_CODE),C(b["a"].ORG.COLLA_CITY_CODE),C(b["a"].ORG.COLLA_DISTRICT_CODE)]}),b["a"].ORG.COLLA_ADDRESS,b["a"].ORG.COLLA_CONTACT_NAME,b["a"].ORG.COLLA_CONTACT_MOBILE].map(function(a){return R.a.createElement(p["a"],{xs:24,md:12,key:a.key},R.a.createElement(T["a"],i()({},e,{config:a,form:r,initialValue:a.value||C(a),rules:[{required:!0,message:"\u8be5\u9879\u4e3a\u5fc5\u586b"}],style:{marginBottom:0}})))}))))},I=n["a"].create()(g),v=t("BNjr"),N=t("03Mi"),S=t("uY7g"),M="orgCollaborate",j=function(e){var a=e.dispatch,t=e.form,n=e.loading,o=Object(s["useState"])(!1),O=_()(o,2),c=O[0],l=O[1],L=Object(s["useState"])({}),A=_()(L,2),E=A[0],k=A[1],y=Object(s["useState"])(!1),p=_()(y,2),D=p[0],g=p[1],j=function(e){return a({type:"".concat(M,"/saveCollaborate"),params:e}).then(function(){g(!0),Object(N["e"])(a,"colla_id")})},Y=[{key:"id",title:"ID"},u()({},b["a"].ORG.COLLA_NAME,{customRender:function(e,a,t){return R.a.createElement(S["a"],{privs:["cooperationunit_edit"],noMatch:e},R.a.createElement("a",{onClick:function(e){k(u()({},a)),l(!0)}},e||"-"))}}),b["a"].ORG.COLLA_CONTACT_NAME,b["a"].ORG.COLLA_CONTACT_MOBILE,u()({},b["a"].ORG.COLLA_ADDRESS,{customRender:function(e,a,t){return[].concat(C()(Object(v["a"])()([a[b["a"].ORG.COLLA_PROVINCE_CODE.key],a[b["a"].ORG.COLLA_CITY_CODE.key],a[b["a"].ORG.COLLA_DISTRICT_CODE.key]])),[a[b["a"].ORG.COLLA_ADDRESS.key]]).join("")}}),b["a"].ORG.COLLA_TYPE],P=[{config:u()({},b["a"].ORG.COLLA_TYPE,{key:"coopTypes"})},{config:b["a"].ORG.COLLA_NAME},{config:b["a"].ORG.COLLA_CONTACT_NAME},{config:b["a"].ORG.COLLA_CONTACT_MOBILE}],h=[R.a.createElement(S["a"],{privs:["cooperationunit_add"],key:"cooperationunit_add"},R.a.createElement(r["a"],{key:"input",icon:"plus-circle",htmlType:"button",type:"primary",onClick:function(){k({}),l(!0)}},"\u65b0\u589e\u5916\u534f\u7ed3\u6784"))],w=Object(s["useMemo"])(function(){return P.map(function(e){return R.a.createElement(T["a"],i()({},e,{form:t}))})},[t]);return R.a.createElement(m["a"],{title:R.a.createElement(d["FormattedMessage"],{id:"menu.school.collaborate"})},R.a.createElement(f["a"],null,R.a.createElement(G["a"],i()({},e,{tableName:M,originColumns:Y,formFields:w,tableActions:h,columnSortable:!1,needUpdate:D,setNeedUpdate:g}))),R.a.createElement(I,{selectedRow:E,visible:c,setVisible:l,loading:n.effects["".concat(M,"/saveCollaborate")],onSubmit:function(e){console.log(e),j(e).then(function(){l(!1)})}}))};a["default"]=Object(E["connect"])(function(e){var a,t=e[M],n=e.loading,o=e.global;return a={},O()(a,M,t),O()(a,"loading",n),O()(a,"global",o),a})(n["a"].create()(j))}}]);