(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[38],{"0WXP":function(e,t,a){"use strict";a.r(t);var n=a("q1tI"),r=a.n(n),o=a("zHco"),c=a("usdK"),i=[{priv:"performance_data_report",key:"performance-data-report",tab:"\u7ee9\u6548\u6570\u636e\u62a5\u8868"},{priv:"salary_check",key:"wage-registration",tab:"\u5de5\u8d44\u767b\u8bb0"}],l=function(e){var t=e.match,a=e.children,l=e.location,u=Object(n["useCallback"])(function(e){c["a"].push("".concat(t.url,"/").concat(e))},[]);return r.a.createElement(o["a"],{title:"\u5de5\u8d44\u7ba1\u7406",tabActiveKey:l.pathname.replace("".concat(t.path,"/"),""),tabList:i,onTabChange:u},a)};t["default"]=l},LKfb:function(e,t,a){"use strict";a.r(t);a("y8nQ");var n=a("Vl3Y"),r=(a("IzEo"),a("bx4M")),o=a("p0pE"),c=a.n(o),i=a("jehZ"),l=a.n(i),u=a("eHn4"),d=a.n(u),s=(a("+L6B"),a("2/Rp")),m=a("qIgq"),f=a.n(m),E=a("q1tI"),y=a.n(E),b=a("6y2Z"),p=a("Zcyb"),g=a("MuoO"),h=a("myFP"),Y=a("9vKQ"),C=a("mGJS"),k=(a("2qtc"),a("kLXV")),v=a("wd/R"),N=a.n(v),_=function(e){var t=e.handleSubmit,a=e.visible,r=e.setVisible,o=e.form,c=e.loading,i=e.afterClose,l=function(e){e.preventDefault(),o.validateFields(function(e,a){if(e)return!1;t({startDate:N()(a["date"][0]).format("YYYY-MM-DD"),endDate:N()(a["date"][1]).format("YYYY-MM-DD")})})};return y.a.createElement(k["a"],{title:"\u5de5\u8d44\u7ee9\u6548\u6570\u636e\u62a5\u8868\u8bbe\u7f6e",visible:a,afterClose:i,onOk:l,destroyOnClose:!0,okButtonProps:{loading:c},onCancel:function(){return r(!1)},closable:!0,maskClosable:!1,keyboard:!1},y.a.createElement(n["a"],{onSubmit:l},y.a.createElement(C["a"],{config:{title:"\u65f6\u95f4\u8303\u56f4",key:"date",type:"rangeDate"},rules:[{required:!0}],form:o})))},A=n["a"].create()(_),M=a("03Mi"),O=a("uY7g"),I="financeWagePerformanceDataReportList",D=function(e){var t=e.form,a=e.dispatch,n=e.dictionary,o=e.loading,i=Object(b["a"])(!1),u=f()(i,2),m=u[0],E=u[1],g=Object(b["a"])(!1),k=f()(g,2),v=k[0],_=k[1];Object(p["a"])(function(){Object(M["d"])(a,"employee_id")});var D=[{title:"\u5e8f\u53f7",key:"key"},Y["a"].FINANCE.WAGE_TIME,{title:"\u65f6\u95f4\u8303\u56f4",key:"timeRage",customRender:function(e,t){return"".concat(t.startDate," ~ ").concat(t.endDate)}},{title:"\u5458\u5de5\u4eba\u6570",key:"total"},{title:"\u5bfc\u51fa\u4eba",key:"creator",customRender:function(e){if(e&&n[Y["a"].EMPLOYEE.ID.dictionary]){var t=n[Y["a"].EMPLOYEE.ID.dictionary].find(function(t){var a=t.uid;return String(a)===String(e)});if(t)return t.name}return"\u7ba1\u7406\u5458"}},{title:"\u64cd\u4f5c",key:"actions",customRender:function(e,t){return y.a.createElement(O["a"],{privs:["performance_data_report_download"],noMatch:"\u4e0b\u8f7d"},y.a.createElement("a",{href:t.excel},"\u4e0b\u8f7d"))}}],R=[y.a.createElement(O["a"],{privs:["performance_data_report_generate"],key:"performance_data_report_generate"},y.a.createElement(s["a"],{key:"add-button",icon:"download",htmlType:"button",type:"primary",onClick:function(){E(!0)}},"\u751f\u6210\u7ee9\u6548\u62a5\u8868"))],F=o.effects["".concat(I,"/exportList")],j=function(e,a){var n;if("dateRadio"===e)"0"===a?n=[N()().subtract(1,"month").startOf("month"),N()().subtract(1,"month").endOf("month")]:"1"===a?n=[N()(),N()()]:"2"===a?n=[N()().subtract(6,"days"),N()()]:"3"===a&&(n=[N()().subtract(29,"days"),N()()]),t.setFieldsValue(d()({},Y["a"].FINANCE.WAGE_TIME.key,n));else if(e===Y["a"].FINANCE.WAGE_TIME.key&&a&&2===a.length){var r=a[0].format("YYYY-MM-DD"),o=a[1].format("YYYY-MM-DD");r===N()().subtract(1,"month").startOf("month").format("YYYY-MM-DD")&&o===N()().subtract(1,"month").endOf("month").format("YYYY-MM-DD")?t.setFieldsValue({dateRadio:"0"}):r===N()().format("YYYY-MM-DD")&&o===N()().format("YYYY-MM-DD")?t.setFieldsValue({dateRadio:"1"}):r===N()().subtract(6,"days").format("YYYY-MM-DD")&&o===N()().format("YYYY-MM-DD")?t.setFieldsValue({dateRadio:"2"}):r===N()().subtract(29,"days").format("YYYY-MM-DD")&&o===N()().format("YYYY-MM-DD")&&t.setFieldsValue({dateRadio:"3"})}};return y.a.createElement(r["a"],null,y.a.createElement(h["a"],l()({},e,{bodyStyle:{padding:0},tableName:I,tableActions:R,originColumns:D,scroll:{x:"max-content"},needUpdate:v,setNeedUpdate:_,formFields:[y.a.createElement(C["a"],{config:Y["a"].FINANCE.WAGE_TIME,form:t,onChange:j,col:9}),y.a.createElement(C["a"],{config:{key:"dateRadio",type:"radio"},mode:"button",values:[{dKey:"0",dValue:"\u4e0a\u6708"},{dKey:"1",dValue:"\u4eca\u5929"},{dKey:"2",dValue:"7\u5929"},{dKey:"3",dValue:"30\u5929"}],onChange:j,form:t})]})),y.a.createElement(A,{afterClose:function(){return _(!0)},handleSubmit:function(e){a({type:"".concat(I,"/exportList"),payload:{params:c()({},e)}}).then(function(e){!1!==e&&E(!1)})},visible:m,setVisible:E,loading:F}))};t["default"]=Object(g["connect"])(function(e){var t,a=e[I],n=e.loading,r=e.global,o=e.signUp,c=e.dictionary;return t={},d()(t,I,a),d()(t,"loading",n),d()(t,"global",r),d()(t,"signUp",o),d()(t,"dictionary",c),t})(n["a"].create()(D))},wPq7:function(e,t,a){"use strict";a.r(t);a("y8nQ");for(var n=a("Vl3Y"),r=a("eHn4"),o=a.n(r),c=(a("IzEo"),a("bx4M")),i=a("jehZ"),l=a.n(i),u=(a("+L6B"),a("2/Rp")),d=a("qIgq"),s=a.n(d),m=(a("tU7J"),a("wFql")),f=a("q1tI"),E=a.n(f),y=a("6y2Z"),b=a("MbOj"),p=a("Zcyb"),g=a("ZhIB"),h=a.n(g),Y=a("usdK"),C=a("MuoO"),k=a("myFP"),v=a("mGJS"),N=(a("2qtc"),a("kLXV")),_=a("p0pE"),A=a.n(_),M=a("9vKQ"),O=a("03Mi"),I="financeWageRegistrationMonthList",D=function(e){var t=e.visible,a=e.setVisible,n=e.afterClose,r=e.data,o=void 0===r?{year:"",month:""}:r,c=e.dispatch;Object(p["a"])(function(){Object(O["d"])(c,M["a"].FINANCE.WAGE_DEPART_ID.dictionary)});var i=[M["a"].FINANCE.WAGE_ID_NO,M["a"].FINANCE.WAGE_EMPLOYEE_NAME,M["a"].FINANCE.WAGE_DEPART_ID,A()({},M["a"].FINANCE.WAGE_BASE_SALARY,{customRender:function(e){return h()(e).format("0,0")}}),A()({},M["a"].FINANCE.WAGE_B_KM2,{customRender:function(e){return h()(e).format("0,0")}}),A()({},M["a"].FINANCE.WAGE_B_KM3,{customRender:function(e){return h()(e).format("0,0")}}),A()({},M["a"].FINANCE.WAGE_B_RECRUIT,{customRender:function(e){return h()(e).format("0,0")}}),A()({},M["a"].FINANCE.WAGE_B_DOCUMENT,{customRender:function(e){return h()(e).format("0,0")}}),A()({},M["a"].FINANCE.WAGE_B_OVERTIME,{customRender:function(e){return h()(e).format("0,0")}}),A()({},M["a"].FINANCE.WAGE_B_POSITION,{customRender:function(e){return h()(e).format("0,0")}}),A()({},M["a"].FINANCE.WAGE_B_BONUS,{customRender:function(e){return h()(e).format("0,0")}}),A()({},M["a"].FINANCE.WAGE_B_OTHERS,{customRender:function(e){return h()(e).format("0,0")}}),A()({},M["a"].FINANCE.WAGE_DEDUCT,{customRender:function(e){return h()(e).format("0,0")}}),A()({},M["a"].FINANCE.WAGE_TEX,{customRender:function(e){return h()(e).format("0,0")}}),A()({},M["a"].FINANCE.WAGE_FINAL_SALARY,{customRender:function(e){return h()(e).format("0,0")}}),M["a"].FINANCE.WAGE_CREATE_TIME];return E.a.createElement(N["a"],{title:"\u5de5\u8d44\u8be6\u60c5",width:"90%",visible:t,afterClose:n,destroyOnClose:!0,closable:!0,maskClosable:!1,keyboard:!1,footer:E.a.createElement(u["a"],{icon:"close-circle",htmlType:"button",onClick:function(){a(!1)}},"\u5173\u95ed"),onCancel:function(){return a(!1)}},o.year&&E.a.createElement(k["a"],l()({},e,{tableSearchParams:{year:o.year,month:o.month},bodyStyle:{padding:0},tableName:I,originColumns:i,scroll:{x:"max-content"}})))},R=Object(C["connect"])(function(e){var t,a=e[I],n=e.loading,r=e.global,c=e.signUp,i=e.dictionary;return t={},o()(t,I,a),o()(t,"loading",n),o()(t,"global",r),o()(t,"signUp",c),o()(t,"dictionary",i),t})(n["a"].create()(D)),F=a("wd/R"),j=a.n(F),S=(a("Pwec"),a("CtXQ")),V=(a("14J3"),a("BMrR")),W=(a("jCWc"),a("kPKH")),w=(a("miYZ"),a("tsqr")),T=(a("OaEy"),a("2fM7")),G=(a("DZo9"),a("8z0m")),L=a("t3Un"),U=a("BTKg"),K=a("hEdC"),P=G["a"].Dragger,x=n["a"].Item,B=T["a"].Option,q=2e3,Z=Number(j()().format("YYYY")),J=j()().subtract(1,"month").format("MM"),H=function(e){var t=e.visible,a=e.setVisible,n=e.loading,r=e.afterClose,o=e.dispatch,c=Object(b["a"])("12"===J?Z-1:Z),i=s()(c,2),d=i[0],m=i[1],f=Object(b["a"])(J),p=s()(f,2),g=p[0],h=p[1],Y=Object(b["a"])(void 0),C=s()(Y,2),k=C[0],v=C[1],_=Object(y["a"])(!1),A=s()(_,2),M=A[0],O=A[1],I=Object(U["a"])();Object(K["a"])(function(){t?(m("12"===J?Z-1:Z),h(J)):v(null)},[t]);var D={name:"file",headers:Object(L["b"])(),data:{year:d(),month:g()},beforeUpload:function(e){return v(e),!1},onChange:function(e){var t=e.fileList,a=t[0].status;"error"===a&&(e.response="\u4e0a\u4f20\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u4e0a\u4f20\uff01"),I()}},R=n.effects["wageUpload/fetch"]||!1,F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!k())return w["a"].error("\u8bf7\u4e0a\u4f20\u5de5\u8d44\u8868\uff01"),!1;o({type:"wageUpload/fetch",payload:{year:d(),month:g(),force:e,file:k()}}).then(function(e){"duplicate"===e?O(!0):!1!==e&&(w["a"].success("\u5bfc\u5165\u6210\u529f\uff01"),v(null),a(!1),O(!1))})};return E.a.createElement(N["a"],{title:"\u5de5\u8d44\u5bfc\u5165",visible:t,afterClose:r,destroyOnClose:!0,onCancel:function(){return a(!1)},onOk:function(){return F()},closable:!0,maskClosable:!1,keyboard:!1,confirmLoading:R},E.a.createElement(V["a"],{gutter:8},E.a.createElement(W["a"],{sm:12},E.a.createElement(x,{label:"\u5f52\u5c5e\u5e74\u4efd",required:!0},E.a.createElement(T["a"],{style:{width:"100%"},onChange:function(e){return m(e)},value:d()},Array.from({length:Z-q+1}).map(function(e,t){return E.a.createElement(B,{key:t+q,value:t+q},t+q)})))),E.a.createElement(W["a"],{sm:12},E.a.createElement(x,{label:"\u5f52\u5c5e\u6708\u4efd",required:!0},E.a.createElement(T["a"],{style:{width:"100%"},onChange:function(e){return h(e)},value:g()},Array.from({length:12}).map(function(e,t){var a=t+1<10?"0".concat(t+1):String(t+1);return E.a.createElement(B,{key:a,value:a},a)}))))),E.a.createElement(P,l()({},D,{className:"hideTip"}),E.a.createElement("p",{className:"ant-upload-drag-icon"},E.a.createElement(S["a"],{type:"inbox"})),E.a.createElement("p",{className:"ant-upload-text"},"\u5355\u51fb\u6216\u62d6\u52a8\u6587\u4ef6\u5230\u6b64\u533a\u57df\u8fdb\u884c\u4e0a\u4f20"),E.a.createElement("p",{className:"ant-upload-hint"},"\u8bf7\u4f7f\u7528\u6a21\u677f\u300a\u5458\u5de5\u5de5\u8d44\u5bfc\u5165.xls\u300b\u6765\u4e0a\u4f20\u3002")),E.a.createElement(N["a"],{title:"\u63d0\u793a",centered:!0,visible:M,afterClose:function(){a(!1)},destroyOnClose:!0,footer:[E.a.createElement(u["a"],{key:"close",onClick:function(){return O(!1)}},"\u4e0d\u8986\u76d6"),E.a.createElement(u["a"],{key:"confirm",loading:R,type:"primary",onClick:function(){return F(1)}},"\u8986\u76d6")],onCancel:function(){return O(!1)},closable:!0,maskClosable:!1,keyboard:!1},"\u5f53\u524d\u6708\u4efd\u5de5\u8d44\u5df2\u5b58\u5728\uff0c\u662f\u5426\u8981\u8986\u76d6\u8fd9\u6761\u8bb0\u5f55\uff1f"))},Q=H,X=a("uY7g"),z=m["a"].Text,$="financeWageRegistrationList",ee=2e3,te=j()().format("YYYY"),ae=[{dKey:"-1",dValue:"\u5168\u90e8"}],ne=te;ne>=Number(ee);ne-=1)ae.push({dKey:String(ne),dValue:String(ne)});for(var re=1,oe=12,ce=[{dKey:"-1",dValue:"\u5168\u90e8"}],ie=oe;ie>=Number(re);ie-=1)ce.push({dKey:String(ie),dValue:String(ie)});var le=function(e){var t=e.form,a=e.dispatch,n=e[$],r=e.loading,o=e.dictionary,i=Object(y["a"])(!1),d=s()(i,2),m=d[0],f=d[1],g=Object(y["a"])(!1),C=s()(g,2),N=C[0],_=C[1],A=Object(y["a"])(!1),I=s()(A,2),D=I[0],F=I[1],j=Object(b["a"])({}),S=s()(j,2),V=S[0],W=S[1];Object(p["a"])(function(){Object(O["d"])(a,"employee_id")});var w=[{title:"\u5e8f\u53f7",key:"key"},{title:"\u5f52\u5c5e\u6708\u4efd",key:"month",customRender:function(e,t){return"".concat(t.year,"-").concat(t.month<10?"0".concat(t.month):t.month)}},{title:"\u767b\u8bb0\u65f6\u95f4",key:"modifyTime"},{title:"\u767b\u8bb0\u4eba",key:"creator",customRender:function(e){if(o[M["a"].EMPLOYEE.ID.dictionary]){var t=o[M["a"].EMPLOYEE.ID.dictionary].find(function(t){var a=t.uid;return String(a)===String(e)});if(t)return t.name}return"\u7ba1\u7406\u5458"}},{title:"\u5e94\u53d1\u5de5\u8d44(\u5143)",key:"finalSalary",customRender:function(e){return h()(e).format("0,0")}},{title:"\u64cd\u4f5c",key:"actions",customRender:function(e,t){var a=t.year,n=t.month;return E.a.createElement(X["a"],{privs:["salary_check_detail"],noMatch:"\u8be6\u60c5"},E.a.createElement("a",{key:"info",onClick:function(){W({year:a,month:n}),f(!0)}},"\u8be6\u60c5"))}}],T=n.total,G=void 0===T?0:T,L=[E.a.createElement(z,{key:"total",strong:!0,style:{marginRight:10}},"\u5de5\u8d44\u603b\u989d\uff1a".concat(h()(G).format("0,0"),"\u5143")),E.a.createElement(X["a"],{privs:["salary_check_import"],key:"salary_check_import"},E.a.createElement(u["a"],{key:"upload-button",icon:"upload",htmlType:"button",type:"primary",onClick:function(){return _(!0)}},"\u5bfc\u5165Excel")),E.a.createElement(X["a"],{privs:["salary_check_download"],key:"salary_check_download"},E.a.createElement(u["a"],{key:"download-button",icon:"download",htmlType:"button",type:"default",onClick:function(){Y["a"].push("/user-center/template-download")}},"\u4e0b\u8f7d\u6a21\u677f"))];return E.a.createElement(c["a"],null,E.a.createElement(k["a"],l()({},e,{bodyStyle:{padding:0},tableName:$,originColumns:w,tableActions:L,needUpdate:D,setNeedUpdate:F,multipleSelection:!1,scroll:{x:"max-content"},formFields:[E.a.createElement(v["a"],{config:{title:"\u5f52\u5c5e\u5e74\u4efd",key:"year",type:"select"},form:t,values:ae,initialValue:te}),E.a.createElement(v["a"],{config:{title:"\u5f52\u5c5e\u6708\u4efd",key:"month",type:"select"},form:t,values:ce,initialValue:"-1"})]})),E.a.createElement(Q,{loading:r,afterClose:function(){return F(!0)},visible:N,setVisible:_,dispatch:a}),E.a.createElement(R,{data:V(),visible:m,setVisible:f}))};t["default"]=Object(C["connect"])(function(e){var t,a=e[$],n=e.loading,r=e.global,c=e.signUp,i=e.dictionary;return t={},o()(t,$,a),o()(t,"loading",n),o()(t,"global",r),o()(t,"signUp",c),o()(t,"dictionary",i),t})(n["a"].create()(le))}}]);